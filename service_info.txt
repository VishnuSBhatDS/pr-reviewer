Question: where is minimart inventory handling handled?

================================================================================

ðŸŸ¦ SERVICE: inventory-service

------------------------------------------------------------

ðŸ“„ Section: useCases
{
  "useCases": [
    "Get inventory count for SKUs across warehouses",
    "Update inventory when orders are placed or cancelled",
    "Validate cart items for availability before checkout",
    "Sync inventory changes from IMS system (STN, GRN, RTV, etc.)",
    "Sync inventory updates to/from OMS system",
    "Track inventory passbook entries for audit and reconciliation",
    "Bulk upload inventory data via CSV/Excel files",
    "Configure minimum quantity thresholds at category or SKU-warehouse level",
    "Handle inward inventory operations for stock receipt",
    "Manage inventory hold for stock transfers",
    "Track and expire deals/offers based on inventory status",
    "Generate inventory mismatch reports",
    "Flush and refresh inventory cache",
    "Get inventory history for specific time periods",
    "Manage user-warehouse access mappings"
  ]
}


ðŸ“„ Section: functionalDescriptions
{
  "functionalDescriptions": [
    "Manages warehouse-SKU inventory with real-time tracking of available, sold, intransit, hold, damage, and virtual inventory quantities",
    "Provides cart and order validation to check inventory availability before order placement",
    "Synchronizes inventory data with IMS (Inventory Management System) for STN, GRN, RTV, RVP, cycle count, and reconciliation operations",
    "Synchronizes inventory updates with OMS (Order Management System) for order processing and fulfillment",
    "Maintains inventory passbook for audit trail and reconciliation of all inventory transactions",
    "Handles inward inventory operations including single, multi, and bulk file uploads (CSV/Excel)",
    "Manages inventory configuration including category-level and SKU-warehouse level minimum quantity settings",
    "Tracks deal and offer expiry status and updates inventory accordingly",
    "Provides inventory mismatch reporting and correction capabilities",
    "Implements Redis-based caching for high-performance inventory lookups with warehouse-level cache control",
    "Supports multiple warehouse types: Spoke, Super Spoke, Hub, Mega Spoke, Marketplace, B2B, B2C",
    "Handles inventory hold operations for STN (Stock Transfer Note) processing",
    "Manages loose inventory conversion and non-sellable inventory tracking",
    "Provides idempotency support for inventory update operations to prevent duplicate processing",
    "Implements compensation and reverse update mechanisms for failure recovery",
    "Tracks inventory history and provides audit capabilities",
    "Manages user-warehouse mappings for access control",
    "Supports async processing via SQS and Kafka for high-throughput inventory operations",
    "Provides inventory verification and cache validation utilities",
    "Handles invoice attachment and status management for inventory passbook entries"
  ]
}


ðŸ“„ Section: parent
{
  "serviceName": "inventory-service",
  "serviceId": "inventory-service",
  "version": "0.0.1-SNAPSHOT",
  "description": "Core inventory management service responsible for tracking, updating, and synchronizing warehouse-SKU inventory across multiple systems including IMS (Inventory Management System) and OMS (Order Management System). Handles inventory operations, cart validation, reconciliation, passbook management, and real-time inventory synchronization."
}


ðŸ“„ Section: functionalKeywords
{
  "functionalKeywords": [
    "inventory management",
    "warehouse inventory",
    "sku inventory",
    "inventory tracking",
    "inventory update",
    "inventory sync",
    "inventory reconciliation",
    "inventory passbook",
    "cart validation",
    "order validation",
    "inventory count",
    "available inventory",
    "sold inventory",
    "virtual inventory",
    "intransit inventory",
    "hold inventory",
    "damage inventory",
    "loose inventory",
    "inward inventory",
    "outward inventory",
    "inventory mismatch",
    "inventory correction",
    "warehouse sku inventory",
    "multi warehouse inventory",
    "inventory configuration",
    "min quantity",
    "category inventory",
    "deal expiry",
    "offer expiry",
    "inventory expiry",
    "stn sync",
    "grn sync",
    "rtv sync",
    "rvp sync",
    "cycle count",
    "external order dispatch",
    "recon sync",
    "damage sync",
    "oms inventory",
    "ims inventory",
    "inventory center",
    "inventory history",
    "inventory passbook",
    "passbook entry",
    "invoice details",
    "buying price",
    "warehouse type",
    "spoke warehouse",
    "hub warehouse",
    "super spoke",
    "mega spoke",
    "b2b inventory",
    "b2c inventory",
    "marketplace inventory",
    "restrict parent order",
    "idempotency",
    "compensate failure",
    "reverse update",
    "revert inventory",
    "inventory cache",
    "cache flush",
    "warehouse cache",
    "inventory verification",
    "bulk inventory update",
    "file upload inventory",
    "excel inventory",
    "csv inventory"
  ]
}


ðŸ“„ Section: apiEndpoints
{
  "apiEndpoints": [
    "/inventory/get-sku-count",
    "/inventory/get-sku-inventory-detail",
    "/inventory/order-create/get-sku-detail",
    "/inventory/insert",
    "/inventory/update",
    "/inventory/update-sold",
    "/inventory/cancel-update",
    "/inventory/compensate-failure",
    "/inventory/get-sku-detail",
    "/inventory/enable-warehouse-cache",
    "/inventory/enable-warehouse-cache-bulk",
    "/inventory/cart-validation",
    "/inventory/order-validation",
    "/inventory/verify-cache",
    "/inventory/compensate-sync",
    "/inventory/get-inv",
    "/inventory/get-sku-inventory",
    "/inventory/get-sku-inv",
    "/inventory/config/category-min-qty",
    "/inventory/config/sku-warehouse/min-qty",
    "/inventory/config/sku-warehouse/file",
    "/inventory/config/download-template",
    "/inventory/multi-sku-inventory",
    "/inventory/warehouse-sku-inventory",
    "/inventory/sku-inventory-list",
    "/inventory/inward-inventory",
    "/inventory/inward-inventory-multi",
    "/inventory/inward-inventory-bulk",
    "/inventory/inward-inventory-revert",
    "/inventory/update-inventory",
    "/inventory/revert-update-inventory",
    "/inventory/warehouses-sku-inventory",
    "/inventory/ims-history",
    "/inventory/validation",
    "/inventory/inventory-mismatch-report",
    "/inventory/inventorySold",
    "/sync/passbook",
    "/sync/save-passbook-entry",
    "/sync/save-passbook-entries",
    "/sync/recon",
    "/sync/damage",
    "/sync/external-order-dispatch",
    "/sync/grn",
    "/sync/stn",
    "/sync/rvp",
    "/sync/rtv",
    "/sync/cycle-count",
    "/sync/stn-hold-inventory",
    "/sync/compensate-stn-hold-inventory",
    "/sync/oms-update",
    "/sync/oms-revert-update",
    "/sync/warehouse-sku-inventory",
    "/sync/reset-min-qty",
    "/warehouse/{id}",
    "/user-warehouses",
    "/utility/enable-verify-reset",
    "/utility/flush-cache",
    "/utility/expire-offer",
    "/utility/index-active-deals",
    "/inventory-passbook/passbook",
    "/inventory-passbook/attach-invoice-details",
    "/inventory-passbook/update-pending-invoices-scheduled",
    "/inventory-passbook/update-failed-invoices-scheduled",
    "/inventory-passbook/attach-invoice-details-scheduled",
    "/inventory-passbook/old-entries"
  ]
}


ðŸ“„ Section: domainKeywords
{
  "domainKeywords": [
    "warehouse",
    "sku",
    "product",
    "offer",
    "deal",
    "inventory",
    "stock",
    "quantity",
    "available",
    "sold",
    "delivered",
    "intransit",
    "hold",
    "damage",
    "loose",
    "virtual",
    "non sellable",
    "shelf life",
    "expiry",
    "warehouse entities",
    "inventory center",
    "material request",
    "stn",
    "stock transfer note",
    "grn",
    "goods receipt note",
    "rtv",
    "return to vendor",
    "rvp",
    "return vendor process",
    "cycle count",
    "recon",
    "reconciliation",
    "passbook",
    "invoice",
    "buying price",
    "selling price",
    "category",
    "min qty",
    "restrict parent order",
    "user warehouse",
    "warehouse type",
    "spoke",
    "hub",
    "super spoke",
    "mega spoke",
    "marketplace",
    "b2b",
    "b2c",
    "dealshare",
    "inventory manage",
    "inventory update manage",
    "sync queue",
    "sync history",
    "stn sync history",
    "stn confirm queue",
    "inventory events status",
    "inventory update log",
    "offer warehouse expiry status",
    "oms inv update manage",
    "po history",
    "product offer warehouse exp status history",
    "sku buying price",
    "inventory category config",
    "inventory category config history",
    "idempotent update log",
    "inventory passbook update history",
    "passbook invoice details",
    "stn rtv oos info",
    "inventory history",
    "products",
    "material inventory request",
    "material inventory request details",
    "inventory center",
    "user warehouse",
    "sync queue",
    "inventory manage dlq"
  ]
}


ðŸ“„ Section: mainTables
{
  "mainTables": [
    "warehouse_sku_inventory",
    "warehouse",
    "inventory_passbook",
    "inventory_history",
    "inventory_manage",
    "inventory_sync_history",
    "stn_sync_history",
    "stn_confim_queue",
    "inventory_update_log",
    "offer_warehouse_expiry_status",
    "oms_inv_update_manage",
    "inventory_category_config",
    "idempotent_update_log",
    "sku_buying_price",
    "material_inventory_request",
    "inventory_center",
    "user_warehouse",
    "sync_queue"
  ]
}


ðŸ“„ Section: cacheKeys
{
  "cacheKeys": [
    "warehouse_sku_inventory",
    "category_min_qty",
    "warehouse_cache_status"
  ]
}


ðŸŸ¦ SERVICE: cart-service

------------------------------------------------------------

ðŸ“„ Section: descriptions
{
  "descriptions": {
    "functional": "Cart Service is a comprehensive microservice responsible for managing the entire shopping cart and order lifecycle in an e-commerce platform. It handles cart operations (add, update, remove products), order creation and placement, payment processing integration, fee calculations (delivery fees, cart fees, shipment fees), discount and promotion management, address management, order cancellation and refunds, inventory validation, ETA calculations, and order tracking. The service supports both B2C and B2B order flows, handles multiple payment methods including COD and online payments (Paytm), manages cart-level and shipment-level fee configurations, processes wallet refunds and credits, and provides comprehensive order management capabilities including bulk operations.",
    "technical": "Cart Service is a Spring Boot 2.2.6 microservice built with Java 8, using MySQL for persistent storage and Redis for caching. It implements RESTful APIs with multiple controller versions (CartController, CartControllerV2, CartControllerV3, CartControllerV4) and service layers (CartService, CartServiceV2, CartServiceV3, CartServiceV4). The service integrates with numerous external services via Feign clients including Payment Service (for payment processing, payment methods, refunds), Discount Service (for discount application and reversion), Pricing Service, Inventory Service, User Service, Location Service, Logistic Service, Recommendation Service, Chat Service, and others. It uses Kafka for asynchronous messaging, implements resilience patterns (circuit breakers, bulkheads, rate limiters) via Resilience4j, employs optimistic locking for cart concurrency control, uses MapStruct for object mapping, and supports async processing and scheduled tasks. The service follows a layered architecture with entities (Cart, Order, PaymentEntity, CartDetails, etc.), repositories, services, controllers, DTOs, and models, and implements comprehensive transaction management for order creation and updates.",
    "paymentIntegration": "Cart Service integrates closely with Payment Service for payment processing workflows. It calls Payment Service to fetch payment details for carts, retrieve saved payment methods, update refund amounts for cancellations, and process bulk refund updates. The service handles payment type selection (COD, Paytm, online payments), manages payment status during order creation, stores payment-related information in PaymentEntity, and coordinates payment flows during checkout. When users proceed to checkout, Cart Service validates the cart, computes fees, and then integrates with Payment Service to handle payment method selection and payment processing. For order cancellations, it coordinates with Payment Service to process refunds and update payment statuses accordingly.",
    "summary": "Cart Service is a Spring Boot microservice managing shopping cart and order lifecycle operations. It handles cart operations (add/update/remove products), order creation and placement, payment processing integration with Payment Service (COD, Paytm, online payments), fee calculations (delivery fees, cart fees, shipment fees), discount and promotion management, address management, order cancellation and refunds, inventory validation, ETA calculations, and order tracking. The service integrates with Payment Service for payment processing, payment methods retrieval, refund processing, and payment status management. It uses MySQL for persistence, Redis for caching, Kafka for messaging, and implements resilience patterns via Resilience4j. Key entities include Cart, Order, PaymentEntity, CartDetails, CartFees. Main APIs: /v1/cart/*, /v2/cart/*, /v1/user/{phone}/carts, /v1/myorder/{phone}, /v1/cancel, /v1/order/*, /v1/cart-config/*, /v1/fees/*. Payment integration: calls Payment Service for payment details, saved payment methods, refund updates, and coordinates payment flows during checkout and order cancellation."
  }
}

