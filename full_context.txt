# Context for src/main/java/com/dealshare/service/cartservice/services/impl/CartConfigV2ServiceImpl.java
# Repo: /Users/dealshare/Downloads/cart-service

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getId ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getAmount ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.valueOf ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getMessage ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.valueOf ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getConfigMeta ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getId ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getAmount ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getMessage ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.adapters.CartConfigCacheMapper.getConfigMeta ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/adapters/CartConfigCacheMapper.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.AppConstant.asList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/AppConstant.java

=== IMPORT com.dealshare.service.cartservice.constants.CartConfigConstant (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/constants/CartConfigConstant.java

public interface CartConfigConstant {
    String ORD_CONFIG = "ORD_CONFIG";
    String DELIVERY_FEE_CONFIG = "DELIVERY_FEE_CONFIG";
    String MAX_PRODUCTS_ALLOWED_IN_CART = "MAX_PRODUCTS_ALLOWED_IN_CART";
    Integer MAX_PRODUCTS_ALLOWED = 50;

    String L2_CATEGORY_IDS = "L2_CATEGORY_IDS";
    String DEAL_IDS = "DEAL_IDS";
    String DELIVERY_FEE = "delivery_fee";
    String ONE_RUPEE_DEAL_VALUE = "ONE_RUPEE_DEAL_VALUE";
    String NEW_USER_CART_CONFIG_KEY_FORMAT = "CART_CONFIG:%s:CLUSTER:%d:MINIMUM_BAG_VALUE_NEW:%s";
    String NEW_USER_CART_LEVEL_DELFEE_CONFIG_KEY_FORMAT = "CART_CONFIG:%s:WAREHOUSE:%d:MINIMUM_CART_VALUE:%s";
    String ORD_CART_CONFIG_KEY_FORMAT = "CART_CONFIG:%s:CLUSTER:%d:ONE_RUPEE_DEAL_VALUE:%s";


}

=== IMPORT com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/dtos/CartParamsTransferModelDTO.java

@Data
@AllArgsConstructor
@NoArgsConstructor
public class CartParamsTransferModelDTO {
    private String appsFlyerId;
    private String deviceId;
    private String platform;
    private Boolean isFirstPurchase;
    private String advertisingId;
    private Boolean isOfflineToOnlineFirstPurchase;
    private Long addressId;
    private Long palId;
    private String instanceId;
}

=== IMPORT com.dealshare.service.cartservice.entities.CartConfig (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/entities/CartConfig.java

@Entity
@Data
@Table(name = "cart_config")
public class CartConfig {

    @Id
    @Column(name = "id")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private Long amount;

    @Column(name = "consumer_type")
    private String consumerType;

    @Column(name = "location_type")
    private String locationType;

    @Column(name = "user_segment")
    private String userSegment;

    @Column(name = "locale")
    private String locale;

    @Column(name = "location_id")
    private Integer locationId;

    private String title;

    private String message;

    @Column(name = "is_active")
    private Integer isActive;

    @Column(name = "config_name")
    private String configName;

    @Column(name = "config_meta")
    private String configMeta;

    @Column(name = "start_date")
    private Date startDate;

    @Column(name = "end_date")
    private Date endDate;

    @Column(name = "created_date")
    private Date createDate;

    @Column(name = "modified_date",updatable = false,insertable = false)
    @LastModifiedDate
    private Date modifiedDate;

}

=== IMPORT com.dealshare.service.cartservice.entities.User (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/entities/User.java

@Entity
@Data
@Table(name = "user")
@JsonIgnoreProperties(ignoreUnknown = true)
public class User implements Serializable {

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Long id;

    @Column(name = "phone")
    private String phoneNumber;

    @Column(name = "name")
    private String name;

    @Column(name = "username")
    private String username;

    @Column(name = "lang")
    private String lang;

    @Column(name = "share_token")
    private String shareToken;

    @Column(name = "auth_key")
    private String authKey;

    @Column(name = "pincode")
    private Long pincode;

    @Column(name = "user_rank")
    private String userRank;

    @Column(name = "city")
    private Integer city;

    @Column(name = "state")
    private Integer state;

    @Column(name = "last_name")
    private String lastName;
}

=== IMPORT com.dealshare.service.cartservice.entities.UsersAddressEntity (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/entities/UsersAddressEntity.java

@Data
@Entity
@Table(name = "user_address")
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class UsersAddressEntity {

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Long id;

    @Column(name = "address")
    private String address;

    @Column(name = "user_id")
    private Long userId;

    @Column(name = "pal_id")
    private Integer palId;

    @Column(name = "city")
    private String city;

    @Column(name = "state")
    private String state;

    @Column(name = "pincode")
    private String pincode;


    @Transient
    private String aName;
    @Transient
    private String stateName;
    @Transient
    private String cityName;

    @Column(name = "varified_address")
    private Boolean verifiedAddress;

    @Column(name = "lat_long_type")
    private String latLongType;

    @Column(name= "pal_area")
    private String palArea;

    @Column(name = "pal_pincode")
    private String palPincode;

    @Column(name= "pal_warehouse")
    private String palWarehouse;

    @Column(name = "`long`")
    private String longitude;

    @Column(name = "lat")
    private String latitude;

    @Column(name = "pal_warehouse_id")
    private Long palWarehouseId;
}

=== IMPORT com.dealshare.service.cartservice.enums.DealType.toString (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/enums/DealType.java

@Override
    public String toString(){
        return this.value!= null? this.value: super.toString();
    }

=== IMPORT com.dealshare.service.cartservice.enums.DealType.toString (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/enums/DealType.java

@Override
    public String toString(){
        return this.value!= null? this.value: super.toString();
    }

=== IMPORT com.dealshare.service.cartservice.enums.DealType.getValue (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/enums/DealType.java



    public String getValue(){
        return this.value!= null? this.value: super.toString();
    }

=== IMPORT com.dealshare.service.cartservice.enums.DealType.toString (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/enums/DealType.java

@Override
    public String toString(){
        return this.value!= null? this.value: super.toString();
    }

=== IMPORT com.dealshare.service.cartservice.enums.Language.getValue (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/enums/Language.java



    public String getValue() {
        return this.value;
    }

=== IMPORT com.dealshare.service.cartservice.exceptions.ValidationException.ValidationException (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/exceptions/ValidationException.java



    public ValidationException(String message) {
        super(message);
    }

=== IMPORT com.dealshare.service.cartservice.exceptions.ValidationException.ValidationException (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/exceptions/ValidationException.java



    public ValidationException(String message) {
        super(message);
    }

=== IMPORT com.dealshare.service.cartservice.feemodule.enums.FeesType (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/feemodule/enums/FeesType.java

public enum FeesType {
    DELIVERY_FEES,
}

=== IMPORT com.dealshare.service.cartservice.feemodule.models.DeliveryFeeDataModel (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/feemodule/models/DeliveryFeeDataModel.java

@Data
public class DeliveryFeeDataModel {
    private Long mov;
    private Long deliveryFee;
    private Long collectedFees;
    private Long allowedBenefits;
    private String locationType;
    private Integer locationId;
    private Double cartValue;
    private DeliveryFeeMessages deliveryFeeMessages;
    private String reasonForFees;
    private ConfigSnapshot configSnapshot;
    private Boolean lastOrderOfCart;
}

=== IMPORT com.dealshare.service.cartservice.feemodule.models.PlatformFeeDataModel (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/feemodule/models/PlatformFeeDataModel.java

@Data
public class PlatformFeeDataModel {
    private Double fees = 0.0;
    private Double collectedFees = 0.0;
    private Double strikeOffValue;

    private String feesType;
    private String feesName;
    private Integer priority = 0;
    private ConfigSnapshot configSnapshot;
}

=== IMPORT com.dealshare.service.cartservice.feignclients.ChatServiceClient (FULL CLASS) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/feignclients/ChatServiceClient.java

@FeignClient(name = "chat-service", url = "${server.chat-service.url}")
public interface ChatServiceClient {

    @PostMapping("/v1/email/send")
    void sendEmail(@RequestBody Map<String, String> sendEmailMap);

    @PostMapping(value = "/v1/send-gupshup-sms", consumes = MediaType.APPLICATION_JSON_VALUE)
    ResponseEntity<?> sendCancelSMS(@RequestBody CancelOrderModel cancelOrderModel);

    @Async
    @PostMapping("/v1/email/send")
    void sendEmailToMultiple(@RequestBody Map<String, Object> sendEmailMap);

    @Async
    @GetMapping(value = "/v1/send-message")
    JsonNode sendWhatsappMessage(@RequestBody WhatsappMessageRequestModel whatsappMessageRequestModel);

    @Async
    @PostMapping(value = "/v1/send-gupshup-sms", consumes = MediaType.APPLICATION_JSON_VALUE)
    ResponseEntity<?> sendSMS(@RequestBody SmsRequestBody SmsRequestBody);

    @PostMapping(value = "/v1/email/send-attachment-new", consumes = MediaType.MULTIPART_FORM_DATA_VALUE)
    void sendEmailWithAttachment(
            @RequestParam("to") String to,
            @RequestParam("subject") String subject,
            @RequestParam("content") String content,
            @RequestPart("file") Resource file
    );
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountBifurcationModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class DiscountBifurcationModel {

    private String discountType;
    private double discountAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserRankTransitionRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class UserRankTransitionRequestModel {

    private Long userId;
    private String currentState;
    private String transitionState;
    private String event;
    private Boolean isForceUpdate;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OptExpressDelRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.DeliveryType;
import lombok.Data;

@Data
public class OptExpressDelRequestModel {
    private Long userId;
    private Long cartId;
    private String pincode;
    private DeliveryType deliveryType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartDetailsModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.OrderPaymentMode;
import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.dealshare.service.cartservice.constants.UserCartType;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.Eta.EtaWidgetModel;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
public class UserCartDetailsModel {

    private Long id;

    private AddressModel address;

    @JsonIgnore
    private UserCartType cartType;

    @JsonIgnore
    private Date cartDate;

    private String date;

    @JsonIgnore
    private OrderPaymentMode paymentMode;

    private String paymentType;

    private String paymentMessage;

    private UserCartStatus cartStatus;

    private String cartStatusMessage;

    private long originalAmount;

    private long originalAmountNonCancelled;

    private long finalAmount;

    private long totalPrice;

    private long finalDiscount;

    private long deliveryFee;

    private long expressShipping = 0L;

    private boolean isExpressCart = false;

    private long quantity;

    private Boolean bankCouponApplied = false;

    @JsonIgnore
    private long cancelledQuantity;

    @JsonIgnore
    private long deliveredQuantity;

    @JsonIgnore
    private long activeQuantity;

    private Boolean isCancellable;

    private String invoice;

    @JsonIgnore
    private JsonNode shareData;

    private List<UserOrderModel> orders;

    private ExpressDeliveryPopUpModel expressDeliveryText;

    private String expectedDeliveryDate;

    private List<DiscountSummaryItem> discountSummaryItems;

    private List<DiscountSummaryItem> discountSummaryItemList;

    private String cancelDisabledMessage;

    private String cancellableStatus;

    private ContactButton contactButton;

    private EtaWidgetModel etaWidgetModel;

    private Boolean isRiderWarehouse = false;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PriceChopModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class PriceChopModel {
    private Long priceChopId;
    private Long offerId;
    private String dealId;
    private int dealPrice;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeliveryFeeModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.entities.Order;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.validation.constraints.NotNull;
import java.util.List;
import java.util.Map;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder(toBuilder = true)
public class DeliveryFeeModel {
    @NotNull
    private List<Long> orderId;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartV2Model.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.orchestration.cp.cartservice.response.OfferCommFcResponse;
import com.dealshare.service.cartservice.entities.CartConfig;
import com.dealshare.service.cartservice.feemodule.enums.FeesType;
import com.dealshare.service.cartservice.models.CartDiscount.CartDiscountResponseV2Model;
import com.dealshare.service.cartservice.models.CartDiscount.CartPromotionsResponse;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

/**
 * @author shubham.mandliya
 */

@Data
public class UserCartV2Model {

    private Long cartId;
    private List<CartItemV2Model> cartItems;
    private CartPricingSummaryModel cartPricingSummaryModel;
    private BigDecimal totalExcludeDealsPrice = BigDecimal.ZERO;

    private Integer totalOrdsInCart; // count+quantity
    private Integer totalExpiredDealsInCart;

    private CartDiscountResponseV2Model cartDiscountResponseV2Model;

    private List<DiscountSummaryItem> discountSummaryItems;

    private CartMessage cartMessage;

    private Boolean isCheckOutAllow;
    private String checkoutMessage;
    private DeliveryFeeConfigModel deliveryFeeConfigModel;
    private Map<String, Object> feesMap;
    private ExpiredDealSectionConfigModel expiredDealSectionConfigModel;
    private UserCacheModel user;

    private String cartStatus;
    private CartConfig ordCartConfig;

    @JsonIgnore
    private Map<String, DealInventoryStatusModel> inventoryMap;
    private DiscountPreference promotionPreference;
    private CartPromotionsResponse cartPromotionsResponse;
    private OfferCommFcResponse offerCommFcResponse;
    private List<SavedPaymentMethods> savedPaymentMethodsList;

    private Boolean isPalServedByStore = false;
    private Boolean isStoreClosed = false;
    private Integer spokeWarehouse;
    private Map<String, Object> userConfirmationData;
    private CartConfirmationMetaData cartConfirmationMetaData;
    private CartUpdateRequestModel cartUpdateRequestModel;
    private String savingsCheckoutMessage;
    private String savingsCheckoutTitle;
    private String savingsCheckoutSubtitle;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonFormat;
import lombok.Data;

import java.math.BigDecimal;
import java.util.Date;
import java.util.Map;

@Data
public class OrderModel{
    private Long id;
    private String orderId;
    private String offerType;
    private String paymentType;
    private Long quantity;
    private String offerId;
    private Long userId;
    private Long productId;
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "dd-MM-yyyy", timezone = "Asia/Kolkata")
    private Date orderDate;
    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "dd-MM-yyyy", timezone = "Asia/Kolkata")
    private Date deliveryDate;
    private String orderStatus;
    private String productImage;
    private Map<String, String> productTitle;
    private String pin;
    private Boolean isCancelAllowed;
    private long shareMessageAmount;
    private Long amount;
    private Long userAddressId;
    private String driverName;
    private String driverContactNo;
    private String invoiceUrl;
    private String orderStatusDes;
    private String source;
    private String refundMessage;
    private String paymentStatus;
    private BigDecimal deliveryFee;
    private Long cartId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/BulkCancelWalletCreditModel.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class BulkCancelWalletCreditModel {

    private List<Long> orderIds ;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.CartStatus;
import com.dealshare.service.cartservice.constants.CartType;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;
import org.hibernate.validator.constraints.Range;

import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;

@Data
public class CartRequestModel {
    @NotNull(message ="User phone is required")
    private String userPhone;

    @NotNull(message = "dealId is required")
    private String dealId;

    @NotNull(message = "Min quantity is required")
    @Min(value = 1, message = "quantity should not be less than 1")
    private Integer quantity;

    @Min(value = 1, message = "Valid pincode is required")
    @NotNull(message = "pincode is required")
    private Long pincode;

    @NotNull(message = "DealType is required")
    private String dealType;

    @JsonIgnore
    private String userRank;

    private Long dealAttributeId;
    private CartStatus cartStatus;
    private CartType cartType;
    private Long totalAmount;
    private String userType;
    private Boolean quickCheckOutBehavior = false;
    private AddressModel address; // for quick checkout
    private Boolean isFromOGSDeal;
    private Boolean isFromCartRecommendation;
    private Long requestUserId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartPricingSummaryModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.math.BigDecimal;

/**
 * @author shubham.mandliya
 */

@Data
public class CartPricingSummaryModel {
    private BigDecimal totalPromotionDiscount;
    private BigDecimal totalCartPromotionDiscount;
    private BigDecimal totalPrice;
    private BigDecimal totalDiscount;
    private BigDecimal totalMrp;
    private BigDecimal totalMpPrice = BigDecimal.ZERO;
    private BigDecimal totalRNM = BigDecimal.ZERO;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PalEntityModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class PalEntityModel {
    private Long id;
    private Long cityId;
    private String pincode;
    private String area;
    private String location;
    private String warehouse;
    private Long warehouseId;
    private String dc;
    private Integer isServicable;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderHistoryModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class OrderHistoryModel {
    List<OrderHistoryResponseObject> orderHistoryList;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/BulkRefundUpdateRequest.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class BulkRefundUpdateRequest {

    private List<CartRefundUpdateRequest> cartDetails;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCart.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.dealshare.service.cartservice.feemodule.enums.FeesType;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.CartDiscount.PromotionPreference;
import com.fasterxml.jackson.annotation.JsonIgnore;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import lombok.Data;

@Data
public class UserCart {
    private Long userId;
    @JsonIgnore
    private String userRank;
    private String phone;
    private Long cartId;
    private List<CartItem> cartItems;
    private Map<String,String> cartUpdateResponse;
    private String cartStatus;
    private BigDecimal totalPromotionDiscount;
    private BigDecimal totalCartPromotionDiscount;
    private CartApplicablePromotion cartPromotion;
    private BigDecimal totalPrice;
    private BigDecimal totalExcludeDealsPrice;
    @JsonIgnore
    private BigDecimal totalMpPrice = BigDecimal.ZERO;
    @JsonIgnore
    private BigDecimal totalRNM = BigDecimal.ZERO;
    private BigDecimal rtgsHandlingFee;
    private BigDecimal rtgsDiscountFee;
    private BigDecimal totalDiscount;
    private BigDecimal totalMrp;
    private BigDecimal freeShipping;
    private Boolean expressApplied = false;
    private BigDecimal expressShipping = BigDecimal.ZERO;
    private Boolean expressAvailable = false;
    private Boolean isCheckOutAllow;
    private Map<String, String> homePageMessageToast;
    private Map<String, String> expressMessageToast;
    private Boolean isOrdAddedToCart = false;
    private Map<String, String> checkoutMessage;
    private Map<String, String> checkoutTitle;
    private Boolean isAddToBagAllowed;
    private Map<String, String> isAddToBagAllowedMessage;
    private String greyOutButtonMessage;
    private BigDecimal minOrderValue;
    private String messageTextColor;
    private String messageBgColor;
    private Map<String, Object> feesMap;
    private String deliveryIcon;
    private String deliveryFeeMessage;
    private String deliveryFeeCancellationMessage ;
    private Boolean expressDeliveryOptButton = false;
    private Boolean oldCheckOutFlow = Boolean.FALSE;
    @JsonIgnore
    private Integer ordCartMov;
    @JsonIgnore
    private Boolean newUser;
    @JsonIgnore
    private Integer totalOrdsInCart;
    private Long cartConfigId=0l;
    private CartMessage cartMessage;
    private Map<String,Long> config;
    private Long ordGlobalMov;
    private Boolean applyWalletCashback;
    private Boolean applyRefund;
    private Integer totalAvailableWalletCashback;
    private Integer totalAppliedWalletCashback;
    private Integer totalAvailableRefund;
    private Integer totalAppliedRefund;
    private Integer totalUserSpecificDiscount;
    private Integer totalUsableCashback;
    private Integer totalUsableRefund;
    private String cartDiscountLabel;
    @JsonIgnore
    private Map<String, DealInventoryStatusModel> inventoryMap;
    private DiscountPreference promotionPreference;
    @JsonIgnore
    private List<DiscountSummaryItem> discountSummaryItems = new ArrayList<>();
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/LatLngVerificationModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class LatLngVerificationModel {
    List<Long> userIds;
    List<Long> stateIds;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartRefundUpdateRequest.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class CartRefundUpdateRequest {

    private Long cartId;
    private List<OrderRefundUpdateRequest> orderDetails;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/LocationV3Model.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;
import java.util.Map;
import java.util.Set;

@Data
public class LocationV3Model {

    private String pincode;

    private List<Integer> clusterIds;

    private Integer b2bWarehouse;

    private Integer spokeWarehouse;

    private List<Integer> spoke;

    private Integer hub;

    private List<Integer> hubs;

    private Boolean allowParentWarehouseOrder;

    private Boolean isServicable;

    private Long cityId;

    private Long stateId;

    private String cityName;

    private String stateName;

    private List<WarehouseDetails> warehouseDetails;

    private Boolean isMarketPlacePincode = false;

    Map<WarehouseType,List<WarehouseDetails>> warehouseTypeMap;

    boolean isServeByO2O;

    private long palId;

    private Boolean palServiceabilityEnabled = false;

    private Boolean isPalServedByStore = false;
}




=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserShipmentModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;
import java.util.Map;

@Data
public class UserShipmentModel {

    private Long id;

    private long finalAmount;

    private long finalCashAmount;

    private String deliveryContactName;

    private Integer doorStepOtp;

    private String doorStepOtpText;

    private List<String> deliveryContactNumbers;

    private Map<Long, String> orderImageMap;
    //check here

    private String deliveryType;

    private String deliveryTypeImage;

    private ExpressDeliveryPopUpModel expressDeliveryText;

    private String deliveryEtaTitle ;

    private String etaFromCache;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderCancelModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class OrderCancelModel {
    private Long orderId;
    private String lang;
    private String source;
    private Boolean ordSchemeKey = false;
    private Boolean deliveryFeeKey = false;
    private Boolean scratchCardKey = false;
    private Integer cancellationReasonTag;
    private String cancellationReason;
    private String comments;
    private Boolean discard = false;
    private Long userId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserAddressModel.java

package com.dealshare.service.cartservice.models;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;
import lombok.Data;

@Data
public class UserAddressModel {
    private String userPhone;
    private List<AddressModel> userAddresses;
    private List<Map<String, String>> paymentMethods;
    private String checkoutMessage;
    private BigDecimal totalAmount;
    private String discountFee;
    private BigDecimal finalAmount;
    private Boolean latLngVerificationEnabled = false;
    private String deliveryEta;
    private Boolean isStoreClosed = false;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OfferResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;
import java.util.Map;

@Data
public class OfferResponseModel {
    private Long id;
    private String offerId;
    private Map<String, String> title;
    private String image;
    private List<SkuModel> variantInformation;
    private String brand;
    private Long productId;
    private Integer categoryL3Id;
    private Long categoryId;
    private Integer parentCategoryId;
    private String categoryNameL1;
    private String categoryNameL2;
    private String categoryNameL3;
    private String startTime;
    private String endTime;
    private String type = "dealshare"; // dealshare (default) or marketplace
    private List<String> clusters;
    private Map<String,Boolean> warehouseExpiry;
    private String offerSellerType;
    private Boolean isProductBikeable;
    private Integer vehicleType;
    private String grammage;
    private Float mrp;
    private Integer returnTime;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PalDataModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class PalDataModel {
    Long id;
    Boolean isServiceable;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ExpressDeliveryMsgModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;


import java.util.Map;

@AllArgsConstructor
@NoArgsConstructor
@Builder(toBuilder = true)
@Data
public class ExpressDeliveryMsgModel {
    private Map<String, String> msg;
    private Map<String, String> homepageToast;
    private Boolean button;
    private String icon;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderQuantity.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@JsonIgnoreProperties(ignoreUnknown = true)
public class OrderQuantity {
    private Integer quantity;
    private Boolean isQuantityUpdated = false;
    private Integer updatedQuantity;
    private String updateQuantityMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.OrderPaymentMode;
import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.dealshare.service.cartservice.constants.UserCartType;
import com.dealshare.service.cartservice.models.AmountBreakup.AmountBreakUp;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItemV2;
import com.dealshare.service.cartservice.models.ratingService.response.CartRatingResponse;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
public class UserCartModel {

    private Long id;

    private UserCartType cartType;

    private UserCartStatus cartStatus;

    private String cartStatusMessage;

    private OrderPaymentMode paymentMode;

    private String paymentType;

    @JsonIgnore
    private Date cartDate;

    private String date;

    private long originalAmount;

    private long finalAmount;

    private List<String> images;
    //check here

    @JsonIgnore
    private long deliveryFee;

    private long quantity;

    private long cancelledQuantity;

    private long deliveredQuantity;

    private long activeQuantity;

   private CartRatingResponse ratingResponse;

    private List<AmountBreakUp> userCartAmountBreakUp;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PromotionPlanDto.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class PromotionPlanDto {
    private Long id;
    private String planName;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeliveryConfig.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.math.BigDecimal;
import java.util.Map;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DeliveryConfig {
    private String deliveryFeeCancellationMessage ;
    private String deliveryFeeMessage;
    private Boolean isCheckOutAllow = Boolean.TRUE;
    private BigDecimal cartValue = BigDecimal.ZERO;
    private BigDecimal freeShipping = BigDecimal.ZERO;
    private Boolean oldCheckOutFlow = Boolean.FALSE;
    private BigDecimal minOrderValue;
    private Map<String, String> checkoutMessage;
    private Map<String, String> checkoutTitle;
    private Boolean isAddToBagAllowed = Boolean.TRUE;
    private Long orderValue;
    private Boolean isRefundApplied = Boolean.FALSE;
    private BigDecimal movComputeAmount = BigDecimal.ZERO;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartApplicablePromotion.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.math.BigDecimal;

@Data
public class CartApplicablePromotion {
    private boolean isApplicable;
    private long applicablePromotionId;
    private BigDecimal eligiblePromotion;
    private BigDecimal nextEligiblePromotion;
    private BigDecimal nextMinimumPrice;
    private BigDecimal effectivePrice;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderETAModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonFormat;
import lombok.Data;

import java.time.LocalDateTime;
import java.time.LocalTime;

@Data
public class OrderETAModel {

    private String orderId;

    @JsonFormat(pattern = "dd-MM-yyyy HH:mm:ss")
    private LocalDateTime deliveryDate;

    @JsonFormat(pattern = "HH:mm")
    private LocalTime slotStartTime;

    @JsonFormat(pattern = "HH:mm")
    private LocalTime slotEndTime;

    private Long deliveryDays;

    private String deliverySlot;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserAndUserPreferenceCacheModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class UserAndUserPreferenceCacheModel {
    private UserCacheModel userData;
    private UserPreferenceCacheModel userPreferencesData;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ScratchCardModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class ScratchCardModel {
    private Boolean isScratchCardEnabled;
    private String imageUrl;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartModel.java

package com.dealshare.service.cartservice.models;

import java.util.Map;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.math.BigDecimal;
import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class CartModel {
    private Long userId;
    private String userPhone;
    private Long pincode;
    private Long cartId;
    private String source;
    private BigDecimal totalCartAmount;
    private List<DealLevelPromotion> cartItems;
    private Map<String,String> cartUpdateResponse;
    private String userLang = "en";
    private Boolean newUser;
    private Long cartConfigId=0l;
    private Boolean userAppliedCashback;
    private Boolean userAppliedRefund;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartItemV2Model.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.common.DealPriceModel;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

/**
 * @author shubham.mandliya
 */

@Data
public class CartItemV2Model {
    private Long attributeChosen;
    private Integer quantityChosen;
    private String offersApplied;

    private DealAttributeV2Model dealAttribute;

    private List<DealDiscountDetailV2> dealDiscountDetailV3s = new ArrayList<>();
    /*
    this will be removed once coupons are live for all users in App
     */
    private List<DealDiscountDetailV2> dealDiscountDetailV2s = new ArrayList<>();

    private Boolean isExpired = Boolean.FALSE;
    private String expiredReason;

    private Boolean oosStatus = Boolean.FALSE;
    private Boolean dealExpired = Boolean.FALSE;
    private Boolean quantityUpdatedStatus = Boolean.FALSE;
    private Boolean maxQuantityUpdatedStatus = Boolean.FALSE;
    private Integer quantityChosenBeforeUpdate ;
    private Integer quantityUpdated;
    private String confirmationMessage;

    private DealDataModel dealDataModel;

    @JsonIgnore
    private DealPriceModel dealPriceModel;
    @JsonIgnore
    private List<String> clusters = new ArrayList<>();
    @JsonIgnore
    private BigDecimal rnm;
    @JsonIgnore
    private List<DealPromotionBifurcation> dealPromotionBifurcations = new ArrayList<>();
    @JsonIgnore
    private List<DealDiscountDetail> dealDiscountDetails = new ArrayList<>();

    /**  field used in B2B, in B2B integration - will create View*/
    @JsonIgnore
    private List<DealAttributeV2Model> dealAttributesB2B = new ArrayList<>();
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/HomePageStripRequest.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import java.util.List;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class HomePageStripRequest {

    @NotNull
    private String source;

    @NotNull
    private String businessModel;

    @NotNull
    @Size(min = 0)
    private List<DealDetailRequestModel> dealDetailRequestModels;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartUpdateResponseModel.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * @author shubham.mandliya
 */

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class CartUpdateResponseModel {

    private List<CartDetailsV2Model> cartDetailsV2Models;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeleteCartItemRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import javax.validation.constraints.NotNull;
import java.util.ArrayList;
import java.util.List;

@Data
public class DeleteCartItemRequestModel {
    @NotNull(message ="User phone is required")
    private String userPhone;
    private String dealId;
    private List<String> dealIds = new ArrayList<>();
    private String source;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ProductQuantityModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ProductQuantityModel {
    private Long Id;
    private String offerId;
    private Integer quantity;
    private Long dealAttributeId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CancelOrderDataRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.entities.OrderHistory;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class CancelOrderDataRequestModel {
    Order orderData;
    Long cartId;
    String source;
    Boolean updateMov;
    OrderHistory orderHistory;
    String lang;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/BulkOrderStatusChangeCommModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class BulkOrderStatusChangeCommModel {
    private List<Long> orderIds;
    private String templateName;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderMovModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.Map;

@Data
public class OrderMovModel {

    private Long remainingTime;

    private Map<String, String> movTitle;

    private Map<String, String> movDesc;

    private  Boolean isShow;

    private String iconUrl;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PostOrderInfoModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import java.util.ArrayList;
import java.util.List;

@Builder
@Data
public class PostOrderInfoModel {

    private long offerPkId;

    private String offerId;

    private boolean isFeaturedDeal;

    private long frdId;

    private String dealType;

    private int sold;

    private long amount;

    private long orderId;

    private long billedAmount;

    private Long warehouseId;

    private List<DealPromotionBifurcation> dealPromotionBifurcationList = new ArrayList<>();

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RateLimiterConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class RateLimiterConfigModel {
    public String ratelimiterName;
    public Integer limitForPeriod;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/StaticPropertiesModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class StaticPropertiesModel {
    private Long id;
    private String propertyKey;
    private String propertyName;
    private String propertyAliasName;
    private String propertyValue;
    private String propertyDesc;
    private Boolean isActive;
    private String locale;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/MyOrderResponseModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.List;

@Data
public class MyOrderResponseModel {

    private JsonNode shareData;

    private List<OrderModel> orders;

    private Boolean pendingOrders;
    private String pendingPaymentMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderTrackingModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class OrderTrackingModel {

        private String status;
        private String updatedAt;
        private boolean isStageChanged;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserSavingsModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class UserSavingsModel {
    private String title = "You have saved <b>₹1000</b> in 2years!";
    private String titleColor = "#191C32";
    private String bgImage = "https://images.dealshare.in/1710828407856SavingsBanner.webp";
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SavedPaymentMethodsCacheResponse.java

package com.dealshare.service.cartservice.models;
import com.dealshare.common.dtos.common.juspay.request.JusPayPaymentMethodInfo;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;
import java.util.List;
@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class SavedPaymentMethodsCacheResponse {
    List<SavedPaymentMethods> savedPaymentMethodsList;
    List<JusPayPaymentMethodInfo> jusPayPaymentMethodInfoList;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class ResponseModel<T> {

  private boolean status;
  private T data;

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/StoreEtaResponse.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class StoreEtaResponse {
    private boolean isStoreClosed;
    private String deliveryETA;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartUpdateRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.CartDiscount.BankOfferPreference;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.dealshare.service.cartservice.models.CartDiscount.PromotionPreference;
import lombok.Builder;
import lombok.Data;

import javax.validation.Valid;
import javax.validation.constraints.*;
import java.util.List;


/**
 * @author shubham.mandliya
 */

@Data
@Builder
public class CartUpdateRequestModel {

    @Size(min = 0, max = 50, message= "Number of deals should be greater than 0 or equal to 50")
    @Valid
    private List<DealDetailRequestModel> dealDetailRequestModels;

    private Long pincode;

    private Boolean applyRefund;
    private Boolean applyWalletCashback;
    private Long cartId;
    private DiscountPreference promotionPreference;

    private Boolean autoRemoveFreeDealRequest;

    private Boolean isInternalOOSRemoval;

    private String screen;
    private String itemSource;
    private String clientComponentId;

    private Long addressId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SkuDataModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;
@Data
public class SkuDataModel {
    private String skuId;
    private Integer warehouseId;
    private Float mrp;
    private Integer inventoryQuantity;
    private Boolean frozen;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ValidateTokenRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class ValidateTokenRequestModel {
    private String refreshToken;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDetail.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealDetail {
    private Long id;
    private Long categoryId; //L2
    private String dealId;
    private Integer quantity = 1;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PostOrderScratchCardModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class PostOrderScratchCardModel {
    private Long userId;
    private Long orderAmount;
    private Long orderId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderHistoryResponseObject.java

package com.dealshare.service.cartservice.models;


import lombok.Data;

import java.util.Date;

@Data
public class OrderHistoryResponseObject {
    String status;
    Date createdDate;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDetailResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

/**
 * @author shubham.mandliya
 */
@Data
@Builder
public class DealDetailResponseModel {
    private Long pkId;
    private Long attributeId;
    private Integer quantity;
    private String dealType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CancelOrderModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.Map;
@Data
@Builder(toBuilder = true)
@NoArgsConstructor
@AllArgsConstructor

public class CancelOrderModel {

        private String smsTemplate;

        private String phone;

        private Map<String,String> postData;
    }



=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/GetCartRequestModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.validation.constraints.NotNull;

import static com.dealshare.service.cartservice.constants.AppConstant.DEAL_TYPE_GROUP_BUY;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@JsonIgnoreProperties(ignoreUnknown = true)
public class GetCartRequestModel {
    @NotNull(message ="User phone is required")
    private String userPhone;

    @NotNull(message ="Deal type is necessary")
    private String dealType = DEAL_TYPE_GROUP_BUY;

    @NotNull(message = "pincode is required")
    private Long pincode;
    private boolean applyCartPromotion;
    private String offerId; // For Quick Checkout

    private Boolean userAppliedCashback;

    private Boolean userAppliedRefund;
    public GetCartRequestModel(String userPhone, Long pincode, boolean applyCartPromotion) {
        this.userPhone = userPhone;
        this.pincode = pincode;
        this.applyCartPromotion = applyCartPromotion;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrdConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class OrdConfigModel {
    private Long amount;
    private String message;
    private Long noOfOrdAllowedInCart;
    private String greyOutButtonMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AvailablePromotions.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.Discount.*;
import java.util.List;
import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class AvailablePromotions {

    private List<AvailablePromotion> coupons;
    private List<AvailablePromotion> productPromotions;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AddressModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import javax.validation.constraints.NotNull;

@Data
public class AddressModel {

    private Long id;

    @NotNull(message = "User Name is required")
    private String userName;
    private String flat;
    @NotNull(message = "AddressLine1 is required")
    private String addressLine1;
    private String addressLine2;
    private String landMark;
    @NotNull(message = "city is required")
    private String city;
    @NotNull(message = "state is required")
    private String state;
    @NotNull(message = "User phone is required")
    private String userPhone;
    private String aliasName;
    @NotNull(message = "Pincode is required")
    private String pincode;

    private String area;

    private String geoPincode;

    private String lat;

    private String lng;

    @JsonIgnore
    private Long stateId;

    @JsonIgnore
    private Long userId;

    @JsonIgnore
    private Long cityId;

    private Long palId;

    private Boolean isVerified;

    private Boolean strip;

    private String source;

    private Boolean verificationRequired = false;

    private Boolean palServiceable = false;

    private Boolean cartRefresh = false;

    private Boolean latLngPriority;

    private Boolean latLngVerificationEnabled = false;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PostOrderUpdateSqsModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class PostOrderUpdateSqsModel {
    String eventType;
    Object object;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ExpiredDealSectionConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

/**
 * @author shubham.mandliya
 */
@Data
@Builder
public class ExpiredDealSectionConfigModel {
    private String expiredSectionTitle;
    private String expiredSectionDescription;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PriceDataRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.List;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class PriceDataRequestModel {
    private Long palId;
    private String pincode;
    private String source;
    private Long userId;
    private Boolean isPriceChop=false;
    private Boolean isBargain=false;
    private Boolean orderLimitCheck = false;
    private List<DealData> dealData;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RvpListResponse.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.time.LocalDateTime;

@Data
@NoArgsConstructor
@AllArgsConstructor
@JsonIgnoreProperties(ignoreUnknown = true)
public class RvpListResponse {
    private LocalDateTime returnCompleteDate;
    private Long returnId;
    private Long orderId;
    private LocalDateTime returnInitDate;
    private String returnReason;
    private String returnStatus;
    private Long warehouseId;
    private String createByUserName;
    private LocalDateTime modifiedDate;
    private String issueType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartResponseModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.orchestration.cp.cartservice.response.OfferCommFcResponse;
import com.dealshare.service.cartservice.models.CartDiscount.CartDiscountResponseV2Model;
import com.dealshare.service.cartservice.models.CartDiscount.CartPromotionsResponse;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import java.util.Map;
import lombok.Builder;
import lombok.Data;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

/**
 * @author shubham.mandliya
 */

@Data
@Builder
public class UserCartResponseModel {
    private Long cartId;
    private List<CartItemV2Model> cartItems;
    private Map<String, Object> userConfirmationData;
    private CartConfirmationMetaData cartConfirmationMetaData;
    private Map<String,String> cartUpdateResponse;
    private BigDecimal totalPromotionDiscount;
    private BigDecimal totalCartPromotionDiscount;
    private BigDecimal totalPrice;
    private BigDecimal totalDiscount;
    private BigDecimal totalMrp;

    private Boolean isCheckOutAllow;
    private List<DiscountSummaryItem> discountSummaryItems;
    private Map<String, DealInventoryStatusModel> inventoryMap;
    private CartDiscountResponseV2Model cartDiscountResponseV2Model;
    private CartMessage cartMessage;
    private String checkoutMessage;
    private DeliveryFeeConfigModel deliveryFeeConfigModel;
    private ExpiredDealSectionConfigModel expiredDealSectionConfigModel;
    private CartPromotionsResponse cartPromotionsResponse;
    private OfferCommFcResponse offerCommFcResponse;
    private List<SavedPaymentMethods> savedPaymentMethodsList;

    private Boolean isStoreClosed;
    private String checkoutTitle;
    private String checkoutSubTitle;
    private String savingsCheckoutMessage;
    private String savingsCheckoutTitle;
    private String savingsCheckoutSubtitle;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/NroOrderResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class NroOrderResponseModel {
    private String responseMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInventoryValidationModelV3.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;
import org.hibernate.validator.constraints.Range;

import javax.validation.Valid;
import javax.validation.constraints.NotEmpty;
import java.util.List;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealInventoryValidationModelV3 {

    private String offerId;

    private Long offerPkId;

    @Range(min = 1)
    private Integer quantity;

    @JsonProperty
    private boolean expired;

    @Valid
    @NotEmpty
    private List<DealInventorySkuModelV3> skus;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ActiveClusterUserMovModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class ActiveClusterUserMovModel {

    private List<Integer> clusterIds;
    private List<String> userRanks;
    private Long mov;
    private String stateName;
    private List<String> clusterNames;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PDPOfferModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class PDPOfferModel {
    private Long id;
    private String DealId;
    private Long categoryId;
    private Long parentCategoryId;
    private String offerType;
    private String dealType;
    private Float Mrp;
    private String name;
    private String image;
    private String productVideo;
    private Float groupPrice;
    private String shareAndEarnIcon;
    private String offPercentage;
    private Integer maxQuantityAllow;
    private Boolean bumperDeal = false;
    private String bumperDealDetailContent;
    private String bumperDealDetailImage;
    private String bumperDealImage;
    private Integer selectedQuantity = 1;
    private Float selectedQuantityPrice;
    private Boolean isAvailableForBuy;
    private String messageForNotBuy;
    private ListPriceModel listPrice;
    private List<HashMap<String,Object>> variantInformation;
    private Integer shareCount = 300;
    private Integer countAlreadyBought = 5000;
    private Boolean clickButton = true;
    private String description;
    private List<String> keyFeatures;
    private List<QuantityDataModel> quantityData;
    private List<HashMap<String,String>> productMultiImages;
    private String shareUrl;
    private DiscountResponseModel.DiscountOfferData discountOfferData;

    @Data
    public static class QuantityDataModel {

        private String buttonLabel;
        private Integer quantity;
        private Float unitPrice;
        private Float singleBuyPrice;
        private Float totalPrice;
        private String label;
        private Float amount;
    }

    @Data
    public static class ListPriceModel {
        private String buttonLabel;
        private BigDecimal singleBuyPrice;
        private BigDecimal selectedQuantityPrice;
        private ArrayList<PriceListModel> priceList;

        @Data
        public static class PriceListModel {
            private String buttonLabel;
            private Integer quantity;
            private BigDecimal singleBuyPrice;
            private BigDecimal discountAmount;
            private BigDecimal totalAmount;
        }
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PaymentDetailsResponseModel.java

package com.dealshare.service.cartservice.models;


import lombok.Data;

@Data
public class PaymentDetailsResponseModel {
    String paymentMethod;
    String paymentGateway;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PostOrderUpdateModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
@Builder
public class PostOrderUpdateModel {

    private long userId;

    private String userType;

    private Boolean isCancelRequest;

    private Boolean cartLevelDeliveryFee = false;

    private List<PostOrderInfoModel> dealRequestModels;

    private long cartId;

    private String pinCode;

    private Long userAddressId;
    private String userRank;
    private String phoneNumber;
    private Boolean isUserAddressVerified = false;
    private Long stateId;
    private String orderSource;
    private String paymentMode;
    private Date orderDate;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeliveryFeeConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import java.math.BigDecimal;

/**
 * @author shubham.mandliya
 */

@Data
@Builder
public class DeliveryFeeConfigModel {
    private String deliveryIcon;
    private String deliveryFeeCancellationMessage;
    private BigDecimal deliveryFee = new BigDecimal("0");
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/FreeDealResponseModel.java

package com.dealshare.service.cartservice.models;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;
/**
 * Lightweight model for free deal responses
 * Contains only essential fields needed for display in the UI
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class FreeDealResponseModel {
    private Long id;
    private String title;
    private String image;
    private String grammage;
    private Float mrp;
    private String OfferId;

    // Optional fields that may be needed in specific contexts
    private String dealType;
    private String animationUrl;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/InventoryValidationRequestModel.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import java.util.Map;
import lombok.Data;

@Data
public class InventoryValidationRequestModel {
    private Long userId;
    private Long userAddressId;
    private String auth_key;
    private String source;
    private AddressModel addressModel;
    Map<WarehouseType,List<WarehouseDetails>> warehouseTypeMap;
    private List<DealInventoryValidationModel> dealData;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RevisedDiscountDetails.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class RevisedDiscountDetails {
    private List<RevisedDiscountOrderDetails> orderDetails;
    private List<RevisedDiscountCartDetails> cartDetails;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDetailsV2Model.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;
import java.util.Date;

/**
 * @author shubham.mandliya
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class CartDetailsV2Model {
    @NotNull(message = "deal Id not present")
    private Long pkId;
    private Long attributeId;

    @NotNull(message = "qty not present")
    @Min(value = 0, message = "qty must be greater than or equal to 0")
    private Integer quantity;
    private String dealType;
    Date createdAt;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDiscountDetailV2.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@JsonIgnoreProperties(ignoreUnknown = true)
@AllArgsConstructor
@NoArgsConstructor
public class DealDiscountDetailV2 {

    private String discountTypeLabel;
    @JsonIgnore
    private String discountType;
    private Integer discountAmount;
    private String fomattedDiscountAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserAddressOrderModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class UserAddressOrderModel {
    Long userAddressId;
    String status;
    Boolean btsCheck = false;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInventoryValidationModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class DealInventoryValidationModel {

    private String offerId;

    private Long offerPkId;

    private Long attributeId;

    private Integer quantity;

    private List<String> clusterIds;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RevertDiscountModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.ArrayList;
import java.util.List;

@Data
public class RevertDiscountModel {
    private Long userId;
    private List<Long> orderIds = new ArrayList<>();

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AbuseVersionStaticPropertyModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonAlias;
import lombok.Data;

import java.util.List;

@Data
public class AbuseVersionStaticPropertyModel {

    @JsonAlias("minimum_version")
    private String minimumAppVersion;

    @JsonAlias("abuse_versions")
    private List<String> abuseAppVersions;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserOrderModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.constants.AppConstants;
import com.dealshare.service.cartservice.constants.OrderPaymentMode;
import com.dealshare.service.cartservice.constants.PaymentStatus;
import com.dealshare.service.cartservice.constants.UserOrderStatus;
import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.utils.MyOrderPinEncryption;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.databind.JsonNode;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Objects;
import lombok.Data;
import org.apache.logging.log4j.util.Strings;
import org.springframework.context.MessageSource;
import org.springframework.context.i18n.LocaleContextHolder;

import java.math.BigDecimal;
import java.util.Date;
import java.util.List;

import static com.dealshare.service.cartservice.constants.AppConstant.*;

@Data
public class UserOrderModel {
    private Long id;
    private String orderId;
    private String offerId;
    private Long productId;
    private String title;
    private String image;
    private long quantity;
    private Long mrp;
    private Long shareAmount;
    private Long shareDiscount;
    private BigDecimal shareDiscountPercentage;
    private long originalAmount;
    private long finalAmount;
    private long discount;
    private UserOrderStatus orderStatus;
    private String orderStatusMessage;
    @JsonIgnore
    private OrderPaymentMode paymentMode;
    private String paymentType;
    private String paymentStatus;
    private String refundMessage;
    @JsonIgnore
    private Date orderPlacedDate;
    private String orderDate;
    @JsonIgnore
    private Date orderUpdatedDate;
    private String updatedDate;
    @JsonIgnore
    private Date orderDeliveryDate;
    private String deliveryDate;
    private String orderPIN;
    private Boolean isCancellable;
    private String deliveryContactName;
    private List<String> deliveryContactNumbers;
    private JsonNode shareData;
    private String toolTipMessage;
    private String deliveryType;
    private String deliveryTypeImage;
    private String expectedDeliveryDate;
    private String grammage;
    private Boolean isReturnable = false;
    private List<DealDiscountDetailV2> dealDiscountDetailsV3;
    private String imageTemplate;
    private String brand;
    private String categoryL1Id;
    private String categoryL2Id;
    private String categoryL3Id;
    private String categoryL1Name;
    private String categoryL2Name;
    private String categoryL3Name;
    private String returnPolicyIcon;
    private String returnUntilDateLabel;

//    public void setIsReturnable(Order order) {
//        if (!order.getOrderType().equalsIgnoreCase(MARKET_PLACE)) {
//            this.isReturnable = false;
//            return;
//        }
//        if (!UserOrderStatus.RETURNABLE.getValues().contains(order.getOrderStatus())) {
//            this.isReturnable = false;
//            return;
//        }
//
//        if ((new Date().getTime() - order.getOrderDate().getTime()) > 6 * DAY_IN_MS && (new Date().getTime() - order.getOrderDate().getTime()) < 16 * DAY_IN_MS) {
//            this.isReturnable = true;
//        }
//    }

    public void setReturnUntilDateLabel(Order order, Integer returnTime, boolean isReturnable, MessageSource messageSource) {
        if (!isReturnable) {
            this.returnUntilDateLabel = messageSource.getMessage(RETURN_NOT_ELIGIBLE_LABEL_KEY, null, LocaleContextHolder.getLocale());
            this.returnPolicyIcon = RETURN_NOT_ELIGIBLE_ICON;
            return;
        }
        if (order.getDeliveryDate() == null || returnTime == null) {
            this.returnUntilDateLabel = messageSource.getMessage(RETURN_NOT_ELIGIBLE_LABEL_KEY, null, LocaleContextHolder.getLocale());
            this.returnPolicyIcon = RETURN_NOT_ELIGIBLE_ICON;
            return;
        }

        // Calculate return eligible until date
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(order.getDeliveryDate());
        calendar.add(Calendar.DAY_OF_MONTH, returnTime);
        Date returnUntilDate = calendar.getTime();

        // Check if return is still eligible
        Date currentDate = new Date();
        if (currentDate.before(returnUntilDate)) {
            SimpleDateFormat sdf = new SimpleDateFormat("MMM dd");
            String formattedDate = sdf.format(returnUntilDate);
            this.returnUntilDateLabel = messageSource.getMessage(RETURN_ELIGIBLE_LABEL_KEY, new Object[]{formattedDate}, LocaleContextHolder.getLocale());
            this.returnPolicyIcon = RETURN_ELIGIBLE_ICON;
        } else {
            this.returnUntilDateLabel = messageSource.getMessage(RETURN_NOT_ELIGIBLE_LABEL_KEY, null, LocaleContextHolder.getLocale());
            this.returnPolicyIcon = RETURN_NOT_ELIGIBLE_ICON;
            this.isReturnable = false;
        }
    }

    public String getImageTemplate() {
        if (!Strings.isBlank(this.image)) {
            return this.image.split("\\?")[0] + AppConstants.imageTemplateUrl;
        }
        return null;
    }

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OutForDeliveryModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class OutForDeliveryModel {

    private Object outForDeliveryModel;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInventoryValidationModelV2.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class DealInventoryValidationModelV2 {

  private String offerId;

  private Long offerPkId;

  private String dealType;

  private String type; // dealshare or marketplace

  private boolean isExpired;

  private Integer quantity;

  private List<SkuModel> skus;

  private List<String> clusterIds;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartOrderDetailsModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class CartOrderDetailsModel {
    Long id;
    String status;
    String paymentType;
    Double amount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class DiscountResponseModel {

    private Boolean status;

    private List<DiscountOfferData> data;

    @Data
    public static class DiscountOfferData{
        private String dealId;
        private Integer quantity;
        private Float promotionPrice;
        private String promotionTypeLabel;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartItem.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.ProductType;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

@Data
public class CartItem {
    private Long id; // offerPkId, required at front-end-side
    private String offerId;
    private String dealType;
    private String imageUrl;
    private Map<String,String> productTitle;
    private Integer quantityChosen;
    @JsonIgnore
    private BigDecimal buyingPrice;
    private Long attributeChosen;
    private Integer maxQuantityAllow;
    private List<SingleVariantModel> singleVariantAttributes;
    private List<DealAttribute> dealAttributes;
    private List<DealDiscountDetail> dealDiscountDetails = new ArrayList<>();
    private List<DealDiscountDetailV2> dealDiscountDetailV2s = new ArrayList<>();
    private List<DealAttribute> dealAttributesB2B;
    private BigDecimal buyMorePrice;
    @JsonIgnore
    private BigDecimal rnm;
    private Boolean isExpired = false;
    private String isExpiredReson;
    private Boolean lowStock;
    private Integer remStock;
    private ProductType productType;
    private Long productPrimaryId;
    private Boolean isFeatured;
    private Long specialDealPkId;
    private Long featuredDealPkId;
    private String specialDealType="";
    private String featuredDealType;
    private Boolean purchaseStatus;
    private List<String> clusters;
    private Long offerPkId;
    private String offersApplied;
    private String offerSellerType;
    List<SkuModel> skuModels;
    private String orderType;
    private String type = "dealshare"; // dealshare or marketplace
    @JsonIgnore
    private List<DealPromotionBifurcation> dealPromotionBifurcationList = new ArrayList<>();
    private Float wabpPrice;
    private Integer categoryL3Id;
    private Long categoryId;
    private Integer parentCategoryId;
    private String categoryNameL1;
    private String categoryNameL2;
    private String categoryNameL3;
    private Integer vehicleType;
    private Long productId;
    private Float mrp;
    private Float billedAmount;
    private Boolean isGoldKdDeal = false;
    private Float goldKdBauPrice;
    private String grammage;
    private String brand;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeliveryCodeCacheModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder(toBuilder = true)
public class DeliveryCodeCacheModel {

    private Integer otp;
    private Boolean isMandatory;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInventorySkuModelV3.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;
import org.hibernate.validator.constraints.Range;

import javax.validation.constraints.NotEmpty;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealInventorySkuModelV3 {

    @NotEmpty
    private String sku;

    @Range(min = 1)
    private int inventoryLimit;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountResponse.java

package com.dealshare.service.cartservice.models;

import java.util.ArrayList;
import java.util.List;
import lombok.Data;

@Data
public class DiscountResponse {

    private List<DealDetailResponse> dealDetailResponses = new ArrayList<>();

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartInfoModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.dealshare.service.cartservice.models.CartDiscount.PromotionPreference;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;

/**
 * @author shubham.mandliya
 */

@Data
@Builder
@AllArgsConstructor
public class CartInfoModel {
    private Long cartId;
    private Boolean isNewCart;
    private DiscountPreference promotionPreference;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/FrdSoldUpdateModel.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class FrdSoldUpdateModel {
    private List<DealInfo> dealDetails;
    private String userType;
    private String pincode;
    private Long palId;
    private boolean cancelRequest;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CreateUserModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import javax.validation.constraints.NotNull;

/**
 * @author shubham.mandliya
 */

@Data
@Builder
public class CreateUserModel {
    @NotNull
    private Long phone;
    private Long pincode;
    private String name;
    @NotNull
    private String source;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PostOrdersETAModel.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import java.util.List;

@Data
public class PostOrdersETAModel {

    private Long cartId;
    private List<EtaOrderDetailModel> orderDetails;
    private Integer orderType;
    private Long userAddressId;
    private Integer palId;
    private List<OrderETAModel> data;

    @Data
    public static class EtaOrderDetailModel {

        private Long orderId;
        private Long orderWarehouseId;
        private Integer orderWarehouseType;
        private Long deliveryWarehouseId;
        private Integer deliveryWarehouseType;
        private Long orderAmount;
        private String vehicleType;
        private Long catId;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderMovBreach.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class OrderMovBreach {
    private String icon;
    private String message;
    private String type;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderStatusWidgetStaticModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.Map;

@Data
public class OrderStatusWidgetStaticModel {
    Map<String,String> arrivingToday;
    Map<String,String> arrivingTomorrow;
    Map<String,String> arrivingBy;
    Map<String,String> today;
    Map<String,String> tomorrow;
    Map<String,String> arrivingOn;
    Map<String,String> deliveryString;
    Map<String,String> deliveryBy;
    Map<String,String> deliveryByTommorow;
    Map<String,String> and;
    Map<String,String> between;
    Map<String,String> labelName;
    String ofdGradient1;
    String ofdGradient2;
    String gradient1;
    String gradient2;
    String iconUrl;
    String etaIconUrl;
    String labelDeeplink;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PaymentMethod.java

package com.dealshare.service.cartservice.models;


import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class PaymentMethod {
    private String name;
    private String type;
    private String icon;
    private String method;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ReturnResponseObjectModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ReturnResponseObjectModel {
    Long cartId;
    Long returnId;
    Long orderId;
    String productName;
    Float quantity = (float) 0;
    String returnCompletionDate;
    String returnInitDate;
    String returnPickedDate;
    String returnUpdatedAt;
    String returnCreatedBy;
    String reason;
    String status;
    Double amount = 0.0;
    String warehouse;
    String phone = "";
    String issueType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderDetailModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.Date;
import java.util.Map;

@Data
public class OrderDetailModel {
    private Long id;
    private String orderId;
    private String paymentType;
    private Long quantity;
    private String offerId;
    private Long userId;
    private Date orderDate;
    private Date deliveryDate;
    private String orderStatus;
    private String showOrderStatus;
    private String productImage;
    private String productTitle;
    private String pin;
    private Boolean isCancelAllowed;
    private long shareMessageAmount;
    private Long amount;
    private Long billedAmount;
    private String address;
    private String city;
    private String state;
    private String pincode;
    private String cityName;
    private String stateName;
    private String DriverContactNo;
    private String DriverName;
    private JsonNode shareData;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDetailResponse.java

package com.dealshare.service.cartservice.models;

import java.util.ArrayList;
import java.util.List;
import lombok.Data;

@Data
public class DealDetailResponse extends DealDetail {
    private Float dealPrice;
    private List<DealDiscountDetail> dealDiscountDetails = new ArrayList<>();
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserAllModels.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.fasterxml.jackson.annotation.JsonInclude;
import lombok.Data;

import java.util.ArrayList;
import java.util.List;

@Data
public class UserAllModels {

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private int totalPage;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long totalOrders;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long deliveryFee;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private List<OrderListModel> orders = new ArrayList<>();

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SqsWabpModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class SqsWabpModel {
    private String skuId;
    private Integer warehouseId;
    private Long orderId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UpdateSkuRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;
import java.util.List;

@Data
public class UpdateSkuRequestModel {
    private Long orderId;
    private String offerId;
    private List<SkuDataModel> skuDataModels;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DeliveryFeeResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.Map;

@Data
public class DeliveryFeeResponseModel {
    private Boolean status;
    private Map<String,Integer> data;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SavedPaymentMethods.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class SavedPaymentMethods {
    Long id;
    String paymentType;
    Object metaData;
    String lastUsed;
    Boolean isPaymentSuccessful;
    Boolean isEnable;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserReviewFormRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.entities.SMSQueueEntity;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

@Data
public class UserReviewFormRequestModel {
    private String authKey;
    private Long userId;
    private String type;
    @JsonIgnore
    private SMSQueueEntity smsQueueEntity;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/StaticPropertiesRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor

public class StaticPropertiesRequestModel {
    private String propertyKey;
    private String propertyName;
    private String lang;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AddProductResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class AddProductResponseModel {

    private int maxProductsallowed;

    private String message;

    public AddProductResponseModel() {}
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/TransactionsModuleModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class TransactionsModuleModel {

    private Long id;
    private Long cartId;
    private Long orderId;
    private Float amount;
    private String type;
    private String reason;
    private String status;
    private String date;
    private String expiryDate;
    private String phone;
    private String remarks;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/GetPriceModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.util.List;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class GetPriceModel {
    private String pincode;
    private Long palId;
    private String source;
    private Long userId;
    private List<DealRequestModel> dealData;
    private Boolean orderLimitCheck=false;
    private Boolean isBargain = false;
    private Boolean isPriceChop = false;
    @Data
    public static class DealRequestModel {
        private String offerId;
        private String offerPkId;
        private String dealType;
        private String skuId;
        private String maxQuantity;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDiscountRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class CartDiscountRequestModel {

    private Long cartId;
    private Long userId;
    private List<CartItem> cartItemList;

    @Data
    public static class CartItem {

        private String offerId;
        private Integer quantityChosen;
        private Integer sellingPrice;
        private Integer categoryId;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDiscountDetail.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class DealDiscountDetail {

    private Integer discountPlanId;
    private String discountType;
    private String discountTypeLabel;
    private Integer discountAmount;
    private String discountTypeStrip;
    private Integer walletPointsId;
    private String promotionType;
    private String remarks;
    private String offerCode;
    private boolean isBankOffer;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserConfirmationFormModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class UserConfirmationFormModel {
    private List<Long> orderIds;
    private String phone;
    private Long userId;
    private Long bagId;
    private String type;
    private String QuestionTemplate;
    private Long messageId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SkuModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;

import java.math.BigDecimal;
import lombok.NoArgsConstructor;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class SkuModel {

    private Long id;

    private String sku;

    private String image;

    private String squareImage;

    private BigDecimal inventoryLimit;

    private String attribute;

    private String attributeValue;

    private Boolean frozen = false;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderValueModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.time.LocalDateTime;

@Data
public class OrderValueModel {

    long orderValue;
    LocalDateTime startTime;
    LocalDateTime endTime;
    LocalDateTime localDateTime;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDiscountResponseModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;

import java.util.List;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class CartDiscountResponseModel {

    private List<DealLevelCartDiscount> cartItemList;
    @JsonProperty("msg")
    private CartMessage.TopStrip msg;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RevisedDiscountOrderDetails.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class RevisedDiscountOrderDetails {
    private Long orderId;
    private Long removedDiscount;
    private Long revisedOrderAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealModal.java

package com.dealshare.service.cartservice.models;
import lombok.Data;
@Data
public class DealModal {
    private long id;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartSmsModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.math.BigDecimal;

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class UserCartSmsModel {

    private String smsText;

    private BigDecimal activeOrderAmount;

    private String source;

    private int etaTime = 72;

    private String orderType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/InventoryValidationRequestModelV3.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.AppConstant;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import javax.validation.Valid;
import javax.validation.constraints.NotEmpty;
import javax.validation.constraints.NotNull;
import java.util.List;
import java.util.Map;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class InventoryValidationRequestModelV3 {

    private boolean allInvMandatory;

    private String pincode;

    private Long userId;

    private String source = AppConstant.B2C_PLACE_ORDER_SOURCE ;

    @Valid
    private List<DealInventoryValidationModelV3> skuData;

    private Map<WarehouseType,List<WarehouseDetails>> warehouseTypeMap;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/FeaturedDealModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;
import org.springframework.validation.annotation.Validated;

@Data
@Validated
public class FeaturedDealModel {

    private Long id;

    private Long offerPkId;

    private String dealId;

    private Integer priority;

    private String dealType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealAttributeV2Model.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;
import java.math.BigDecimal;

/**
 * @author shubham.mandliya
 */

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealAttributeV2Model {
  private String attributeValue;
  private BigDecimal mrp;
  private BigDecimal promotionPrice = new BigDecimal("0"); //  FE =  Refund + Jackpot + others
  private BigDecimal dealPrice = new BigDecimal("0");
  private BigDecimal updatedDealPrice = new BigDecimal("0");
  private BigDecimal discountPrice= new BigDecimal("0"); //  FE = Product Discount
  private String promotionType;

  // todo below 4 pending from FE
  private String promotionTypeLabel; // Pending from FE
  private BigDecimal promotionPriceShare = new BigDecimal("0"); // Pending from FE
  private String promotionTypeShare; // Pending from FE
  private String promotionKeySubType; // Pending from FE - returned for scratch card

  private String offPercentage;
  @JsonIgnore
  private String promotionKey;

  /** Below fields used in B2B, in B2B integration - will create View*/
  @JsonIgnore
  private String attributeName; // B2B
  @JsonIgnore
  private BigDecimal dealPricePerPiece; // b2b
  @JsonIgnore
  private Integer minAttributeValue;// b2b
  @JsonIgnore
  private Integer maxAttributeValue;// b2b
}



=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartConfigCacheModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class CartConfigCacheModel {

    private Long id;

    private Long amount;

    private String consumerType;

    private String locationType;

    private String userSegment;

    private String locale;

    private Integer locationId;

    private String title;

    private String message;

    private Integer isActive;

    private String configName;

    private String configMeta;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CreateRVPRequestOrderDTO.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class CreateRVPRequestOrderDTO {
    private String amount;
    private String customerId;
    private String issueType;
    private String orderDate;
    private String orderId;
    private String palArea;
    private String paymentMode;
    private String productName;
    private String quantity;
    private String remark;
    private String remarks;
    private String requestType;
    private String skuId;
    private String source;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SavedPaymentMethodsCacheRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class SavedPaymentMethodsCacheRequestModel {
    Long userId;
    String userRank;
    Boolean juspayEnabled;
    Double cartValue;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/InventoryValidationRequestModelV2.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import java.util.Map;

import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Builder;
import lombok.Data;

@Data
@Builder

public class InventoryValidationRequestModelV2 {

  List<Integer> warehouseIds;

  List<Integer> spokeIds;

  List<Integer> hubIds;

  List<Integer> mpSpokeIds;

  List<Integer> mpHubIds;

  private boolean addCart;

  @JsonProperty
  private boolean b2b;

  Map<WarehouseType,List<WarehouseDetails>> warehouseTypeMap;

  List<DealInventoryValidationModelV2> dealData;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderWidgetModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.common.cta.CtaResponse;
import lombok.Builder;
import lombok.Data;

import java.time.LocalDateTime;

@Data
@Builder
public class OrderWidgetModel {
    private String icon;
    private String title;
    private String etaIcon;
    private String etaTitle;
    private String etaData;
    private String gradient1;
    private String gradient2;
    private CtaResponse cta;
    private boolean flag = false;
    private LocalDateTime deliveryEta;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DoorStepDeliveryFeeUpdate.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.Data;

@Data
public class DoorStepDeliveryFeeUpdate {

    String shipmentId;
    List<Long> orderIds;
    Integer deliveryFee;
    Long configId;

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrdersStatusUpdateEvent.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class OrdersStatusUpdateEvent {

  private List<Long> orderIds;
  private String event;

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ReturnWrapperRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ReturnWrapperRequestModel {
    private Long orderId;
    private String reason;
    private String comments;
    private String userId;
    private String returnType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ExpressDeliveryPopUpModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ExpressDeliveryPopUpModel {

    private String title;

    private String descOne;

    private String descTwo;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartConfigModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;
import java.util.Date;


@Data
public class CartConfigModel {
    private Long id;
    private Long amount;
    private String consumerType;
    private String locationType;
    private Integer locationId;
    private String userSegment;
    private String locale;
    private String title;
    private JsonNode message;
    private Boolean isActive;
    private String configName;
    private JsonNode configMeta;
    private Date startDate;
    private Date endDate;
    private Date createDate;
    private Date modifiedDate;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/InvoiceCancelDto.java

package com.dealshare.service.cartservice.models;

import java.util.List;
import lombok.Data;

@Data
public class InvoiceCancelDto {
    private String btocInvoiceId;
    private String type = "BTOC_INV_DISCARD";
    private List<Long> orders;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/InventoryValidationResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class InventoryValidationResponseModel {
    private Boolean status;
    private List<DealInventoryStatusModel> data;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ClusterMovRequestModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.databind.JsonNode;
import lombok.Data;

import java.util.List;
import java.util.Map;

@Data
public class ClusterMovRequestModel {
    private List<Integer> clusterIds;
    private Long movAmount;
    private List<String> userRanks;
    private String cartConfigMeta;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/WarehouseEtaConfigResponseModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.eta.WarehouseEtaConfigDto;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * Response wrapper for warehouse ETA config API
 */
@AllArgsConstructor
@NoArgsConstructor
@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class WarehouseEtaConfigResponseModel {
    
    private WarehouseEtaConfigDto data;
    private Boolean status;
} 

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderConfirmationHeader.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class OrderConfirmationHeader {
    private String title;
    private String subtitle;
    private String mediaUrl;
    private String imageUrl;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AcceptOrderStatusRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class AcceptOrderStatusRequestModel {
    private String type;
    private List<Long> orderIds ;
    private Long userId ;
    private String phone ;
    private Long messageId;
    private Integer cancellationReasonTag;
    private String cancellationReason;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrdDetail.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;
import java.util.Map;

@Builder
@AllArgsConstructor
@NoArgsConstructor
@Data
public class OrdDetail {
    private String image;
    private Integer mrp;
    private Integer price = 1;
    private Map<String, String> title;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserShipmentDetailsModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.AmountBreakup.AmountBreakUp;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItemV2;
import lombok.Data;

import java.util.ArrayList;
import java.util.List;

@Data
public class UserShipmentDetailsModel {

    private Long id;

    private AddressModel address;

    private long originalAmount;

    private long finalAmount; //

    private long finalCashAmount; //

    private long finalDiscount; //

    private long deliveryCharges; //

    private List<UserOrderModel> orders;

    private String deliveryContactName;

    private List<String> deliveryContactNumbers;

    private String deliveryType;

    private String deliveryTypeImage;

    private ExpressDeliveryPopUpModel expressDeliveryText;

    List<AmountBreakUp>  amountBreakUp;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartPlusMinusConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class CartPlusMinusConfigModel {
    private Boolean isPlusMinusEnabled;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountDeliveryFeeAggregatorRequest.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.feemodule.models.ComputeFeesCancelOrderDetails;
import lombok.Data;

import java.util.List;

@Data
public class DiscountDeliveryFeeAggregatorRequest {
    private String shipmentId;
    private List<Long> shipmentOrders;
    private List<ComputeFeesCancelOrderDetails> cancelOrderDetails;
    private List<Long> rescheduledOrder;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartConfirmationMetaData.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class CartConfirmationMetaData {
    Boolean expiredCartIDealsStatus = Boolean.FALSE;

    Boolean oosCartIDealsStatus = Boolean.FALSE;

    Boolean updatedCartIDealsStatus = Boolean.FALSE;

    Boolean maxQuantityUpdatedStatus = Boolean.FALSE;

    Boolean couponValidationFailedStatus = Boolean.FALSE;

    Boolean promotionDealValidationFailedStatus = Boolean.FALSE;

    Boolean couponExpiredStatus = Boolean.FALSE;

    Boolean dealPromotionExpiredStatus = Boolean.FALSE;

    String cartConfirmationTitle;

    String cartConfirmationDescription;

    Integer discountValue;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PromotionServiceRequest.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class PromotionServiceRequest {

    private String references;

    private String eventName;

    private String transactionType;

    private Long userId;

    private Double remainingAmount;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/WarehouseDetails.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class WarehouseDetails {

  private Integer spokeId;

  private Integer b2b;

  private Integer b2bNc;

  private Integer hubId;

  private String name;

  private int clusterId;

  private String entityId;

  private String warehouseType;

  private WarehouseType type;

  private boolean restrictOrder;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealPromotionBifurcation.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
@AllArgsConstructor
@NoArgsConstructor
public class DealPromotionBifurcation {

    private Float promotionPrice;
    private String promotionType;
    private String promotionTypeLabel;
    private Integer promotionPlanId;
    private String discountType;
    private Integer walletPointsId;
    private String icon;
    private String offerCode;
    private boolean isBankOffer;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountRequest.java

package com.dealshare.service.cartservice.models;

import java.util.ArrayList;
import java.util.List;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class DiscountRequest {
    private String authKey;
    private List<DealDetail> dealDetailRequests = new ArrayList<>();
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DoorStepDeliveryFeeUpdateResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class DoorStepDeliveryFeeUpdateResponseModel {

    private Boolean status = Boolean.FALSE;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RejectOrderStatusResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class RejectOrderStatusResponseModel {
    private List<Long> orderIds;
    private String userMessage;
    private String messageId;
    private List<UserOrderModel> orderDetails;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealLevelCartDiscountSplit.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealLevelCartDiscountSplit {

    private Integer planId;
    private Integer discount;
    private String discountType;
    private String discountTypeLabel;
    private String discountTypeStrip;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RevisedDiscountCartDetails.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class RevisedDiscountCartDetails {
    private Long cartId;
    private Long mov;
    private Long cartValue;
    private Long toBeDeliverRevisedCartValue;
    private List<Long> cancelledOrders;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/FalseCancellationModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class FalseCancellationModel {
    private String type;
    private List<Long> orderIds ;
    private Long userId ;
    private String phone ;
    private Integer cancellationReasonTag;
    private String cancellationReason;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserInfoModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import javax.validation.constraints.NotNull;

/**
 * @author shubham.mandliya
 */

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class UserInfoModel {
    @NotNull
    private String phone;
    private String name;
    private Long pincode;
    private String source;
    private Integer cityId;
    private Integer stateId;
    private String address;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartProducts.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.math.BigDecimal;
import java.util.List;

@Data
public class UserCartProducts {
    private List<ProductQuantityModel> productQuantityMapping;
    private BigDecimal totalPrice;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartOrderDetailsResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.List;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class CartOrderDetailsResponseModel {
    Long id;
    Integer deliveryFee;
    List<CartOrderDetailsModel> cartOrderDetailsModelList;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/PriceDataResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.HashMap;
import java.util.TreeMap;

@Data
public class PriceDataResponseModel {

    private HashMap<Long, DealPriceResponseModel> dealPriceModel;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDetailsCacheModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.*;

/**
 * @author shubham.mandliya
 */

@Data
@Builder
@AllArgsConstructor
@NoArgsConstructor
@JsonIgnoreProperties(ignoreUnknown = true)
public class CartDetailsCacheModel {
    Long cartId;
    List<CartDetailsV2Model> cartDetailsV2Models = new ArrayList<>();
    DiscountPreference promotionPreference;
    Date updatedAt;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UnBlockETACapacityModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class UnBlockETACapacityModel {

    private Long cartId;
    private Long orderId;
    private Integer orderStatus;
    private Integer orderType;
    private Long userAddressId;
    private Integer palId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AddressModelNewUserVersion.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class AddressModelNewUserVersion {
    private List<Long> orderIds;
    private Long orderId;
    private Long addressId;
    private String flat;
    private String address;
    private String landMark;
    private Long userId;
    private String lat;
    private String lng;
    private String name;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealAttribute.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.math.BigDecimal;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealAttribute {
    private String attributeValue;
    private Integer minAttributeValue;
    private Integer maxAttributeValue;
    private String attributeName;
    private BigDecimal mrp;
    private Long productId;
    private BigDecimal discountPrice;
    private BigDecimal promotionPrice;
    private String promotionType;
    private BigDecimal discountPercent;
    private BigDecimal dealPrice;
    private BigDecimal dealPricePerPiece;
    private String promotionTypeLabel;
    private String promotionId;
    private String promotionKey;
    private BigDecimal promotionPriceShare = new BigDecimal("0");
    private String promotionTypeShare;
    private String  promotionTypeLabelShare;
    private String promotionKeyShare;
    private String promotionKeySubType; //returned for scratch card
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealPriceResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.TreeMap;

@Data
public class DealPriceResponseModel {

    private Long clusterId;
    private Long offerPkId;
    private String offerId;
    private Float mrp;
    private Long featuredDealPkId;
    private Boolean dealDisable;
    private Boolean purchaseStatus;
    private String notBuyMessage;
    private Integer maxQuantity;
    private TreeMap<Integer, Float> quantityPrice;
    private String dealType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/StampStripModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.Map;

@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class StampStripModel {
    private String title;
    private String desc;
    private String bgImage;
    private String buttonText;
    private Map<String, String> cta;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/HomePageStrip.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.Discount.CartDiscountCommunication;
import lombok.Builder;
import lombok.Data;

@Builder
@Data
public class HomePageStrip {

    private CartDiscountCommunication discountCommunication;
    private Boolean disableOrds;
    private FreeDealResponseModel freeDealResponseModel;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/MessageStrip.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.Discount.PlanCouponDetail;
import java.util.List;
import lombok.Data;

@Data
public class MessageStrip {

    private String icon;
    private String title;
    private String subtitle;
    private String progress;
    private String termsAndConditions;
    private List<String> tncList;
    private String header;
    private PlanCouponDetail planCouponDetail;
    private String planIdentifier;

    // deal status

    // 3 different pop up type structure
    // offerType will be also there
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderRefundUpdateRequest.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class OrderRefundUpdateRequest {

    private Long orderId;
    private Long refundAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInfo.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class DealInfo {

  private long offerPkId;
  private int quantity;
  private String offerId;
  private long attributeId;

}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DiscountDeliveryFeeAggregatorResponse.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.feemodule.models.ComputeShipmentFeesResponseDetails;
import lombok.Data;

import java.util.List;

@Data
public class DiscountDeliveryFeeAggregatorResponse {
    private RevisedDiscountDetails revisedDiscountDetails;
    private List<ComputeShipmentFeesResponseDetails> shipmentFees;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/WhatsappMessageRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.HashMap;

@Data
public class WhatsappMessageRequestModel {
    private String waMessageType;
    private HashMap<String,String> params;
    private String userphone;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserPreferenceCacheModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class UserPreferenceCacheModel {

    private Long userId;
    private Integer notifications;
    private Integer sms;
    private String userType;
    private String userTypeNew;
    private Long rmId;
    private Integer isBlocked;
    private String androidId;
    private String advertisingId;
    private boolean discountServiceRoutingEnabled = false;
}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderListModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.UserCartType;
import com.dealshare.service.cartservice.constants.UserOrderStatus;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
public class OrderListModel {
    private Long orderId;
    private Long cartId;
    private UserCartType userCartType;
    private String offerId;
    private Long productId;
    private String title;
    private String image;
    private long amount;
    private String deliveryDate;
    private String orderedDate;
    private long itemCount;
    private UserOrderStatus orderStatus;
    private String orderStatusMessage;
    private String refundMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SingleVariantModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class SingleVariantModel {
    private String dealImage;
    private String attributeValue;
    private Long attributeId;
    private String attributeType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderInfoModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.OrderPaymentMode;
import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.dealshare.service.cartservice.constants.UserCartType;
import com.fasterxml.jackson.annotation.JsonIgnore;
import lombok.Data;

import java.util.Date;
import java.util.List;

@Data
public class OrderInfoModel {
    private UserCartStatus cartStatus;

    private Long userId;

    private String phone;

    private String shippingAddress;

    @JsonIgnore
    private Date orderDeliveryDate;

    @JsonIgnore
    private Date orderUpdatedDate;

    @JsonIgnore
    private String deliveryDate;

    @JsonIgnore
    private String updatedDate;

    @JsonIgnore
    private Date orderPlacedDate;

    private String orderDate;

    private long totalCartAmount;

    private long totalPromotionDiscount;

    private List<OrderItemsInfo> cartItems;

    private long FreeShipping;

    private String expectedDeliveryDate;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartAmountDetailsResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.math.BigDecimal;

@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class CartAmountDetailsResponseModel {
    Long id;
    BigDecimal totalCartAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CreateRVPRequestOrder.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.chatbot.User;
import lombok.Data;

import java.util.List;

@Data
public class CreateRVPRequestOrder {
    private List<CreateRVPRequestOrderDTO> orders;
    private User user;
    private String customerName;
    private String customerContact;
    private String warehouseId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ReturnResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class ReturnResponseModel {
        Double totalReturnValue = 0.0;
        int totalReturnOrders = 0;
        Float returnRatioCarts;
        Float returnRatioAmount;
        List<ReturnResponseObjectModel> returnList;
        int currentPage;
        int totalPages;
        long totalElements;
        int pageSize;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealLevelPromotion.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.constants.AppConstants;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.dealshare.service.cartservice.constants.DeliveryType;
import com.fasterxml.jackson.annotation.JsonProperty;
import java.util.Objects;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import org.apache.logging.log4j.util.Strings;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealLevelPromotion {
    private String dealId;
    private String dealType;
    private Long productId;
    private Boolean isFeatured;
    private Long featuredDealPkId;
    private Long specialDealPkId;
    private String specialDealType="";
    private String dealImage;
    private BigDecimal netMargin;
    private Map<String,String> productTitle;
    private Integer quantity;
    private Boolean isQuantityUpdated = false;
    private Integer updatedQuantity;
    private String updateQuantityMessage;
    private Integer attributeId;
    private String orderId;
    @JsonProperty(value = "order_primary_id")
    private Long orderPKId;
    private String orderType="MAIN";
    private BigDecimal dealMRP;
    private BigDecimal dealPrice;
    private BigDecimal billedAmount= BigDecimal.valueOf(0);
    private BigDecimal buyingPrice = BigDecimal.valueOf(0);
    private BigDecimal promotionPrice;
    private BigDecimal promotionPriceWithoutCartDiscount;
    private List<DealDiscountDetail> dealDiscountDetails = new ArrayList<>();
    private String promotionType;
    private String promotionTypeLabel;
    private String promotionKey;
    private BigDecimal promotionPriceShare = new BigDecimal("0");
    private String promotionTypeShare;
    private String promotionTypeLabelShare;
    private String promotionKeyShare;
    // fields returned  for price check
    private boolean priceUpdated = false;
    private BigDecimal oldPrice;
    private String priceUpdateMessage = "";
    private String deliveryTypeImage;
    private Long warehouseId;
    private String deliveryType = DeliveryType.REGULAR.name();
    private String warehouseType;
    private Long deliveryWarehouseId;
    private String deliveryWarehouseType;
    private Long vehicleType;
    private String deliveryDate;
    private LocalDate etaDate;
    private String deliverySlot;
    private List<String> clusterIds;
    // field returned for scratch card
    private String promotionKeySubType;
    private Integer apiVersion = 2;
    private Float wabpPrice;
    private String grammage;
    private List<DealPromotionBifurcation> discountBifurcation = new ArrayList<>();
    private Boolean isGoldKdDeal = false;
    private Long categoryId;
    private Long categoryIdL1;
    private Long categoryIdL2;
    private Long categoryIdL3;
    private String categoryNameL1;
    private String categoryNameL2;
    private String categoryNameL3;
    private List<SkuModel> skus;
    private String brand;
    private Long offerPkId;
    private String imageTemplate;

    public String getImageTemplate() {
        if (!Strings.isBlank(this.dealImage)) {
            return this.dealImage.split("\\?")[0] + AppConstants.imageTemplateUrl;
        }
        return null;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserGstModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class UserGstModel {

    private long id;
    private long userId;
    private String gstNumber;
    private String name;
    private String address;
    private String document;
    private Boolean status = true;
    private Boolean isVerified = false;
    private String createdBy;
    private String modifiedBy;
    private String docType;
    private String docStatus;
    private String userNumber;
    private Long docActionBy;
    private String comment;
    private String panNo;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/WarehouseType.java

package com.dealshare.service.cartservice.models;

public enum WarehouseType {
  SPOKE,
  SUPER_SPOKE,
  HUB,
  MEGA_SPOKE,
  MARKETPLACE,
  B2B,
  B2BNC,
  DEALSHARE
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealLevelCartDiscount.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.math.BigDecimal;
import java.util.List;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealLevelCartDiscount {

    private String offerId;
    private List<DealLevelCartDiscountSplit> promotionPriceList;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCacheModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonAlias;
import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.OptBoolean;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class UserCacheModel {
    private Long id;
    @JsonAlias("phoneNumber")
    private String phoneNumber;
    private String userRank;
    private String userType;
    @JsonAlias("username")
    private String username;
    private String name;
    private String lang;

    @JsonFormat(lenient = OptBoolean.TRUE)
    private Long pincode;
    private Long palId;
    private Integer city;
    private Integer state;
    private String authKey;
    private String shareToken;
    private String source;
    private Boolean isNewUser = false;
    private String address;
}



=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartMinViewResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.ArrayList;
import java.util.List;

/**
 * @author shubham.mandliya
 */

@Data
public class UserCartMinViewResponseModel {
    List<DealDetailResponseModel> dealDetailResponseModels = new ArrayList<>();
    Integer totalDealsInCart = 0;
    List<SavedPaymentMethods> savedPaymentMethods;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SmsRequestBody.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

import java.util.Map;

@Data
@Builder
public class SmsRequestBody {

    private String smsTemplate;

    private String phone;

    private Map<String,String> postData;

    private String source;

    private Integer vendor;

    private String messageType ;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDetailRequestModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.enums.DealType;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

import javax.validation.constraints.Min;
import javax.validation.constraints.NotNull;

/**
 * @author shubham.mandliya
 */
@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
public class DealDetailRequestModel {
    @NotNull(message = "deal Id not present")
    private Long pkId;
    private Long attributeId;

    @NotNull(message = "qty not present")
    @Min(value = 0, message = "qty must be greater than or equal to 0")
    private Integer quantity;
    private String dealType = DealType.GROUP_BUY.name();

    private Boolean isFromAssistBuying = Boolean.FALSE;
    private Boolean isFromCartRecommendation= Boolean.FALSE;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/SyncDeliveryFeesModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class SyncDeliveryFeesModel {
    private Long orderId;
    private Long cartId;
    private Long deliveryFees;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartMessage.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.Discount.PlanCouponDetail;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class CartMessage {

    private TopStrip topStrip;

    @AllArgsConstructor
    @NoArgsConstructor
    @Builder(toBuilder = true)
    @Data
    public static class TopStrip {

        private String icon;
        private String firstMessage;
        private String secondMessage;
        private String sideMessage;
        private String progress;
        private PlanCouponDetail planCouponDetail;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealInventoryStatusModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.inventory.SkuData;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import java.util.List;
import java.util.Map;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class DealInventoryStatusModel {
    private String offer;
    private Boolean inventoryAvailable;
    private List<Integer> remainInventory;
    private String warehouseType;
    private Map<String, SkuData> skuData;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/AcceptOrderStatusResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;
@Data
public class AcceptOrderStatusResponseModel {
    private List<Long> orderIds;
    private String userMessage;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RefundAmountPaymentsUpdateModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class RefundAmountPaymentsUpdateModel {

    Long orderId;
    Integer deliveryFee;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CategoryModel.java

package com.dealshare.service.cartservice.models;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.util.Map;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class CategoryModel {

    private Integer categoryId;

    private Integer parentCategoryId;

    private String name;

    private String images;

    private Integer categoryLevel;

    private Integer returnTime;

    private Map<String, String> nameLang;

    private Map<String, String> descLang;

    private boolean status;

    private Integer rank;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDetailsModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.math.BigDecimal;

@Data
public class CartDetailsModel {
    private Long Id;
    private Long cartId;
    private Long dealId;
    private Long orderId;
    private Long dealAttributeId;
    private String dealType;
    private Integer quantity;
    private BigDecimal dealPrice;
    private Boolean status;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ContactButton.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ContactButton {
    private boolean enabled;
    private String phoneNumber;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ActiveOrdCartConfigModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class ActiveOrdCartConfigModel {
    private String stateName;
    private String clusterName;
    private Integer clusterId;
    private long mov;
    private String userRank;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealData.java

package com.dealshare.service.cartservice.models;

import lombok.Builder;
import lombok.Data;

@Data
@Builder
public class DealData {

    private Long offerPkId;
    private String offerId;
    private String skuId;
    private String dealType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderItemsInfo.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;

import java.math.BigDecimal;
import java.util.Map;

@Data
public class OrderItemsInfo {
    private String dealId;
    private String dealType;
    private String dealImage;
    private String productTitle;
    private Long quantity;
    private Integer attributeId;
    private String orderId;
    @JsonProperty(value = "order_primary_id")
    private Long orderPrimaryId;
    private BigDecimal dealMRP;
    private BigDecimal dealPrice;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/MovBreachMessage.java

package com.dealshare.service.cartservice.models;

import lombok.Data;
import java.util.ArrayList;
import java.util.List;

@Data
public class MovBreachMessage {
    private String message;
    private String messageFooter;
    private String title;
    private String internalId;
    private Boolean ordSchemeKey;
    private Boolean deliveryFeeKey;
    private Boolean scratchCardKey;
    private List<OrderMovBreach> orderMovBreach = new ArrayList<>();
    private OrdDetail ordDetail;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ScratchCardCacheModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class ScratchCardCacheModel {

    private Boolean isEnable;
    private String group;
    private  String[] launchOn;
    private String imageUrl;
    private long schemeId;
    private Double amount;
    private Long customerPointsPK;
    private Boolean isOrderPlaced;
    private String homePageMessage;
    private Long expirationTimeInMilli;
    private Long orderId = 0L;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderPushToImsRequest.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class OrderPushToImsRequest {

    private Long warehouseId;

    private List<Long> orderIds;

    private String deliveryType;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DealDataModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.common.dtos.View;
import com.dealshare.common.dtos.constants.AppConstants;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonView;
import lombok.Data;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import org.apache.logging.log4j.util.Strings;
import com.dealshare.common.dtos.common.FlairDisplayDto;

/**
 * @author shubham.mandliya
 */

@Data
public class DealDataModel {
    private Long id;
    private String offerId;
    private String title;
    private String image;
    private String grammage;
    private String dealType;
    private Integer maxQuantity;

    @JsonIgnore
    private String endTime;
    @JsonIgnore
    private String startTime;
    @JsonIgnore
    private String offerType;
    @JsonIgnore
    private Boolean isGoldKdDeal = false;
    @JsonIgnore
    private String offerSellerType; // equal to type
    @JsonIgnore
    private Integer vehicleType;
    @JsonIgnore
    private Long featuredDealPkId; // ??
    private String featuredDealType;
    @JsonIgnore
    private Boolean isFeatured;
    @JsonIgnore
    private List<SkuModel> skuModels = new ArrayList<>();
    @JsonIgnore
    private Long parentCategoryId;
    @JsonIgnore
    private Long categoryIdL2;
    @JsonIgnore
    private Long l3CategoryId;
    @JsonIgnore
    private String brand;
    private String categoryNameL1;
    private String categoryNameL2;
    private String categoryNameL3;
    @JsonIgnore
    private String imageTemplate;

    private Map<String,FlairDisplayDto> flairs;

    public String getImageTemplate() {
        if (!Strings.isBlank(this.image)) {
            return this.image.split("\\?")[0] + AppConstants.imageTemplateUrl;
        }
        return null;
    }
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/LogoutUserAllRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class LogoutUserAllRequestModel {
    private Long userId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/QuickCartOrderSummaryModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class QuickCartOrderSummaryModel {
    private Float Mrp;
    private String name;
    private String image;
    private Float groupPrice;
    private String offPercentage;
    private DiscountResponseModel.DiscountOfferData discountOfferData;
    private DeliveryConfig deliveryConfig;
    private String DealType;
    private String PhoneNumber;
    private float TotalAmountToPay;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/UserCartOrderDetailsModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.dealshare.service.cartservice.constants.UserCartType;
import com.dealshare.service.cartservice.constants.UserOrderStatus;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;
import org.aspectj.weaver.ast.Or;

import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class UserCartOrderDetailsModel {

    private UserCartStatus cartStatus;
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long totalActiveOrders;
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private int totalCashToBePaid;
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long totalPastOrders = 0;
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long totalOfdOrders;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private Integer orderPin;

    private int totalPage;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private long totalOrders;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private UserCartStatus nameOfStatus;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private int deliveryFee;

    @JsonIgnore
    private UserCartType cartType;

    @JsonIgnore
    private Date cartDate;

    @JsonIgnore
    private long cancelledQuantity;

    @JsonIgnore
    private long deliveredQuantity;

    @JsonIgnore
    private long activeQuantity;

    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    private List<OrderListModel> orders;

    @JsonProperty
    @JsonInclude(JsonInclude.Include.NON_DEFAULT)
    Map<UserCartStatus, UserAllModels> details;


}

=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/DsUserModel.java

package com.dealshare.service.cartservice.models;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import com.fasterxml.jackson.annotation.JsonProperty;
import lombok.Data;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
@SuppressWarnings("java:S1068")
public class DsUserModel {

    private Long id;

    private String username;

    @JsonProperty("emp_id")
    private String empId;

    private String email;

    private int userRefundLimit;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderStatusChangeCommModel.java

package com.dealshare.service.cartservice.models;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class OrderStatusChangeCommModel {
    private Long orderId;
    private String templateName;
    private Float refundAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/ReturnRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class ReturnRequestModel {

    private String customerId;
    private List<String> orderIds;
    private List<Long> returnIds;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/RejectOrderStatusRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

import java.util.List;

@Data
public class RejectOrderStatusRequestModel {
    private String type;
    private List<Long> orderIds ;
    private Long userId ;
    private String phone ;
    private Long messageId;
    private Integer cancellationReasonTag;
    private String cancellationReason;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/OrderDeliverySlotsModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class OrderDeliverySlotsModel {
    private String deliverySlot;
    private String deliveryDate;
    private String deliveryDateTime;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartDetailsRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class CartDetailsRequestModel {
    Long userId;
    Boolean considerTime;
    String time;
    String cartStatus;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/CartOrderModel.java

package com.dealshare.service.cartservice.models;

import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.CreateOrder.OrderFees;
import com.dealshare.service.cartservice.models.Discount.CartDiscountDetails;
import com.dealshare.service.cartservice.models.ScratchCard.UserSchemeActivityPerDayContract;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.Data;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

@Data
@JsonIgnoreProperties(ignoreUnknown = true)
public class CartOrderModel {
    private Long userId;
    private String userPhone;
    private Long cartId;
    private String paymentId;
    private String paymentType;
    private String appVersion;
    private String source;
    private AddressModel address;
    private Boolean cartOrderStatus;
    private BigDecimal totalCartAmount;
    private BigDecimal totalPrice;
    private List<DealLevelPromotion> cartItems;
    private Map<String,String> cartUpdateResponse;
    private String paymentTypeText;
    private String paymentMessage;
    private String locationType;
    private Integer freeShipping;
    private OrderFees orderFees;
    private Long orderPkId;
    private String expectedDeliveryDate;
    private Boolean showLatLongPopup;
    private Long cartConfigId=0l;
    Map<WarehouseType,List<WarehouseDetails>> warehouseTypeMap;
    private Boolean isMarketPlacePincode = false;
    private String utmSource;
    private UserSchemeActivityPerDayContract scratchCardData;
    private Map<String, Long> config;
    private StampStripModel promotionStripData;
    private Boolean userAppliedCashback;
    private Boolean userAppliedRefund;
    private CartDiscountDetails cartDiscountDetails;
    private BigDecimal netMargin;
    private BigDecimal rupeeNetMargin;
    private OrderConfirmationHeader header;
    private UserSavingsModel userSavings;
    private OrderWidgetModel orderWidget;
    private PaymentMethod paymentMethod;
    private List<DiscountSummaryItem> discountSummaryItems;
    private boolean couponApplied = false;
    private Boolean isCodFirstPurchase = false;
    private Boolean isOfflineToOnlineConversion = false;
    private String entityId;

    private BigDecimal finalCartAmount;
    private BigDecimal cartItemAmount;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/MovResponseModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class MovResponseModel {
    private Long userId;
    private Double amount;
    private Long cartId;
}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/FeedbackTag.java

package com.dealshare.service.cartservice.models;

import lombok.Data;

@Data
public class FeedbackTag {

    Integer id ;
    String tag;
    String event;

}


=== IMPORT com.dealshare.service.cartservice.models.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/models/NroOrderRequestModel.java

package com.dealshare.service.cartservice.models;

import lombok.Data;
import lombok.NonNull;

import java.util.List;

@Data
@NonNull
public class NroOrderRequestModel {
    private List<Long> orderIds;
    private String messageId;
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/ExpressDeliveryService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.Cart;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.models.*;

import java.io.IOException;
import java.util.Map;

public interface ExpressDeliveryService {
    Boolean isCartEligibleForExpressDelivery(Map<String, DealInventoryStatusModel> inventoryMap, User user, Map<Long, OfferResponseModel> offerResponseModels, String lang, Integer spokeId) throws IOException;

    Map<String, Boolean> processExpressCartPostOrder(CartOrderModel cartOrderModel, CartOrderModel responseCartOrderModel);

    void applyExpressDelivery(Cart cart);

    void removeExpressDelivery(Cart cart);

    void computeExpressConfig(Cart cart, UserCart userCartModel, Boolean isExpressAvailable, String lang) throws IOException;

    void computeExpressEtaPostOrder(CartOrderModel responseCartOrderModel, String lang) throws IOException;
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartRecommendationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.exceptions.CartRecommendationNotFoundException;
import com.dealshare.service.cartservice.models.CartAddOns.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.validation.annotation.Validated;

@Validated
public interface CartRecommendationService {

    RecommendationResponseModel getCartRecommendationDeals(String variant, @UserIdValidation Long userId, String lang, String pincode, String source, Integer palId) throws CartRecommendationNotFoundException;
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/PricingService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.*;
import com.dealshare.service.cartservice.models.*;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonNode;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

public interface PricingService {
    PriceDataResponseModel getDealPrice(ProductOffer productOffer, String source, String pincode, User user, String dealType);
    JsonNode getPricingData(List<CartDetails> cartDetailsList,Map<Long, OfferResponseModel> offerResponseModels,Long pincode, Long palId, String source,Long userId) throws JsonProcessingException;
    JsonNode getPriceData(Map<String, CartItemCacheEntity> cartItems, String source, String pincode, Long userId) throws Exception;
    void setCartPricingData(UserCart userCart);
    CartPricingSummaryModel calculateCartPricingDataV2(List<CartItemV2Model> cartItemV2Models);
    BigDecimal calculateTotalExcludeDealsPrice(List<CartItemV2Model> cartItemV2Models, CartConfig ordCartConfig);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/EtaService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.models.CreateOrder.DeliveryEtaUpdateModel;
import com.dealshare.service.cartservice.models.Eta.OrderStatusWidgetCacheUpdateModel;
import com.dealshare.service.cartservice.models.growthbook.TomorrowEtaWarehouseConfig;
import com.dealshare.service.cartservice.models.growthbook.OrderConfirmationEtaBufferConfig;
import com.dealshare.service.cartservice.models.growthbook.StoreTimeConfig;

import java.time.LocalDateTime;
import java.time.ZonedDateTime;
import java.util.Date;
import java.util.List;
import java.util.Map;
import java.util.concurrent.CompletableFuture;

public interface EtaService {
    Map<Long, String> fetchEtaForOrders(List<Long> orderList) ;

    String fetchEtaForOrder(Long id);

    String fetchDeliveryETA(Long orderId);

    String fetchDeliverySlot(Long orderId);

    void cancelEtaUpdate(long cartId, long orderId, String status, long userAddressId, Integer palId);

    List<OrderETAModel> updatePostOrderEta(PostOrdersETAModel postOrdersETAModel, Boolean addressVerified);

    Date computeDeliveryETA(Long locationWtaWhId, String orderStatus, String orderType, Date orderDate,
                            String warehouseType, Long deliveryWarehouseId) throws Exception;

    void batchInsertDeliveryEtaData(List<DeliveryEtaUpdateModel> deliveryEtaUpdateModelList);

    Map<String, OrderDeliverySlotsModel> getOrderDeliverySlots(List<Long> orderIds);

    LocalDateTime getDeliveryEta(Boolean addressVerified, Long warehouseId);

    Boolean getEtaConfig(String pincode, Long userId);

    Boolean getRiderWarehouseEnabled(Integer warehouseId, Long userId);

    Boolean isOrderFromRiderWarehouse(Long orderId, Long userId);

    ZonedDateTime getEarliestCeiledDeliveryHour(List<Long> orderIds);

    String formatDeliveryEta(OrderStatusWidgetStaticModel staticModel,ZonedDateTime zonedDateTime, String lang);

    OrderConfirmationEtaBufferConfig getOrderConfirmationEtaBufferConfig(Integer warehouseId);

    StoreTimeConfig getStoreTimeConfig(Integer warehouseId);

    StoreTimeConfig getStoreTimeConfigFromWarehouseEta(Integer warehouseId);

    TomorrowEtaWarehouseConfig getTomorrowEtaWarehouseConfig(Integer warehouseId);

    List<OrderStatusWidgetCacheUpdateModel> updateCacheForCancelledOrders(Order order);

    CompletableFuture<Void> updateOrderStatusWidgetCacheAsync(List<OrderStatusWidgetCacheUpdateModel> orderStatusWidgetCacheUpdateModelList);

    List<OrderStatusWidgetCacheUpdateModel> formatCacheUpdateRequest(Long userId, List<DealLevelPromotion> responseDealLevelPromotions );

    String orderEta(Order order);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserLocationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.LocationV3Model;
import com.dealshare.service.cartservice.models.UserCacheModel;
import org.apache.commons.lang3.tuple.Pair;

public interface UserLocationService {
    Pair<UserCacheModel, LocationV3Model> populateUserAndLocationDetails(Long userId, String pincode,
                                                                         Integer palId,
                                                                         String source);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.LocationETA;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.entities.UserAddress;
import com.dealshare.service.cartservice.entities.UserPreferences;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.validation.annotation.Validated;

import java.io.IOException;
import java.util.Optional;

@Validated
public interface UserService {

    User getUser(String phone);

    UserCacheModel getUser(UserInfoModel userInfoModel);

    Optional<User> getUserFromId(Long id,String source);

    UserAddressModel addAddress(AddressModel address,String appVersion, Long palId, String platform) throws Exception;

    UserAddressModel getAddress(User userInfo, String lang, String source, Long amount, LocationV3Model locationV3Model,
                                UserAddress userAddress, Long palId, Double latitude, Double longitude) throws IOException;

    UserAddressModel getAddressV2(@UserIdValidation Long userId, String lang, String source, Long amount, String appVersion,
                                  boolean isNewPage, Long palId, String platform, Double latitude, Double longitude) throws IOException;

    LocationETA getLocationETA(String pincode, Double lat, Double lng) throws IOException;

    Boolean addAddressNewUserVersion(AddressModelNewUserVersion addressModel);

    Boolean isNewUser(String lang,String pincode,Long userId);

    void deleteOgsKey(Long userId);

    Optional<UserPreferences> getUserPreferencesByUserId(Long userId);

    UserAndUserPreferenceCacheModel getUserAndUserPreferenceByPhone(String phone);

    UserCacheModel performUserValidation(Long userId, String source);

    void shareIncentivePlan(Long userId, Long cartId);

    UserCacheModel performUserValidation(String phone, String source, Boolean blockedBypassFlag);

    Boolean getStoreClosedByPassConfig(Long userId);

    StoreEtaResponse getStoreEta(LocationV3Model locationData, Long userId,String appVersion,String platform);


}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartTPDataMappingService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.cart.request.CartDetailsRequest;
import com.dealshare.common.dtos.common.ResponseDealData;
import com.dealshare.common.dtos.common.UserInfo;
import com.dealshare.common.dtos.discount.enums.DiscountType;
import com.dealshare.common.dtos.discount.models.OrderDiscountHistory;
import com.dealshare.common.dtos.discount.models.OrderDiscountInfoModel;
import com.dealshare.common.dtos.ingestion.AppsFlyerEventType;
import com.dealshare.common.dtos.ingestion.CartOrderDataDetails;
import com.dealshare.productaggregatorservice.models.productaggregator.DealDataRequestModel;
import com.dealshare.productaggregatorservice.models.productaggregator.DealDataResponseModel;
import com.dealshare.service.cartservice.constants.UserRankConstants;
import com.dealshare.service.cartservice.constants.UserType;
import com.dealshare.service.cartservice.entities.*;
import com.dealshare.service.cartservice.enums.CartDeliveryStatus;
import com.dealshare.service.cartservice.enums.DownstreamService;
import com.dealshare.service.cartservice.feignclients.SchemeServiceClient;
import com.dealshare.service.cartservice.feignclients.UserServiceClientWrapper;
import com.dealshare.service.cartservice.models.CartTpMapping.CartMappingData;
import com.dealshare.service.cartservice.models.UserAndUserPreferenceCacheModel;
import com.dealshare.service.cartservice.repositories.*;
import lombok.extern.slf4j.Slf4j;
import org.apache.kafka.common.errors.InvalidRequestException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.util.CollectionUtils;
import org.springframework.util.ObjectUtils;

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.*;
import java.util.stream.Collectors;

import static com.dealshare.service.cartservice.enums.CartDeliveryStatus.*;

/**
 * Service for handling cart third-party data mapping operations
 */
@Service
@Slf4j
public class CartTPDataMappingService {

    @Autowired
    private CartTPDataMappingRepo cartTPDataMappingRepo;
    
    @Autowired
    private CartOrderMappingRepository cartOrderMappingRepository;
    
    @Autowired
    private UserServiceClientWrapper userServiceClientWrapper;
    
    @Autowired
    private OrderEntityRepository orderEntityRepository;
    
    @Autowired
    private CartRepository cartRepository;
    
    @Autowired
    private ProductAggregatorService productAggregatorService;
    
    @Autowired
    private OrderProductDetailsRepository orderProductDetailsRepository;
    
    @Autowired
    private WarehouseRepository warehouseRepository;
    
    @Autowired
    private CityRepository cityRepository;

    @Autowired
    private SchemeServiceClient schemeServiceClient;

    /**
     * Saves cart third-party data mapping
     * @param cartMappingData Data containing cart and third-party mapping information
     */
    public void saveCartTpDataMapping(CartMappingData cartMappingData) {
        if (cartMappingData == null || cartMappingData.getCartId() == null || cartMappingData.getTpId() == null) {
            return;
        }
        
        CartThirdPartyDataMapping entity = new CartThirdPartyDataMapping();
        entity.setCartId(Math.toIntExact(cartMappingData.getCartId()));
        entity.setThirdPartyDataId(cartMappingData.getTpId());
        entity.setThirdPartyName(cartMappingData.getTpName().getValue());
        entity.setThirdPartyDataValue(cartMappingData.getTpData());
        
        cartTPDataMappingRepo.save(entity);
    }

    /**
     * Gets cart details based on the request
     * @param data Cart details request
     * @return Cart order data details
     */
    public CartOrderDataDetails getDetails(CartDetailsRequest data) {
        validateCartDetailsRequest(data);

        if (isPurchaseEvent(data.getEventType())) {
            return getPurchaseCartData(data);
        }

        return getCartOrderDetails(data);
    }

    /**
     * Determines the cart delivery status based on order IDs
     * @param orderIds All order IDs
     * @param passedOrderIds Selected order IDs
     * @return Cart delivery status
     */
    public CartDeliveryStatus getOrderStatus(List<Long> orderIds, List<Long> passedOrderIds) {
        if (CollectionUtils.isEmpty(orderIds)) {
            return UNKNOWN;
        }
        
        if (isFullyProcessed(orderIds, passedOrderIds)) {
            return COMPLETELY;
        }
        
        return PARTIALLY;
    }

    /**
     * Checks if the request status is a valid discard status
     */
    private boolean isValidDiscardStatus(AppsFlyerEventType eventType) {
        return eventType == AppsFlyerEventType.CART_DISCARD || 
               eventType == AppsFlyerEventType.CART_CANCEL || 
               eventType == AppsFlyerEventType.CART_REFUND;
    }

    /**
     * Validates cart details request
     */
    private void validateCartDetailsRequest(CartDetailsRequest data) {
        if (data == null || data.getCartId() == null) {
            throw new InvalidRequestException("Invalid request");
        }
    }

    /**
     * Checks if the event type is a purchase event
     */
    private boolean isPurchaseEvent(AppsFlyerEventType eventType) {
        return eventType == AppsFlyerEventType.PURCHASE || 
               eventType == AppsFlyerEventType.FIRST_PURCHASE || eventType == AppsFlyerEventType.OFFLINE_TO_ONLINE_CONVERSION;
    }

    /**
     * Gets cart details for order items
     */
    private CartOrderDataDetails getCartOrderDetails(CartDetailsRequest data) {
        CartOrderDataDetails details = new CartOrderDataDetails();
        Long cartId = data.getCartId();
        List<Long> passedOrderIds = getDistinctOrderIds(data.getOrderIds());
        Set<Long> passedOrderIdsSet = new HashSet<>(passedOrderIds);

        if (cartId == null || passedOrderIds.isEmpty()) {
            return details;
        }

        Cart cart = cartRepository.findById(cartId).orElse(null);
        if (cart == null) {
            return details;
        }

        Optional<List<CartOrderMapping>> cartOrderMappings = cartOrderMappingRepository.findByCartId(cartId);
        if (!cartOrderMappings.isPresent() || cartOrderMappings.get().isEmpty()) {
            return details;
        }

        // Set basic user details
        setupUserDetails(details, cart);

        // Get all orders
        List<CartOrderMapping> mappings = cartOrderMappings.get();
        List<Long> orderIds = extractOrderIds(mappings);
        
        validateOrderIds(orderIds, passedOrderIds);
        
        List<OrderEntity> orders = orderEntityRepository.findAllById(orderIds);
        if (orders.isEmpty()) {
            return details;
        }

        List<OrderEntity> passedOrders = orders.stream()
            .filter(order -> passedOrderIdsSet.contains(order.getId()))
            .collect(Collectors.toList());

        // Set basic cart details
        setupCartDetails(details, orders, cartId, orderIds, passedOrderIds);

        // Calculate and set amount details
        calculateAndSetAmounts(details, orders, passedOrderIds);

        // Set warehouse and city information
        setupWarehouseDetails(details, orders.get(0).getId());

        // Add individual order details
        populateOrderItems(details, orders, passedOrderIdsSet);

        setupSpecialOfferDetails(details, passedOrders);

        return details;
    }

    /**
     * Gets cart data for purchase events
     */
    private CartOrderDataDetails getPurchaseCartData(CartDetailsRequest data) {
        CartOrderDataDetails details = new CartOrderDataDetails();
        Long cartId = data.getCartId();

        Cart cart = cartRepository.findById(cartId).orElse(null);
        if (cart == null) {
            return details;
        }

        Optional<List<CartOrderMapping>> cartOrderMappings = cartOrderMappingRepository.findByCartId(cartId);
        if (!cartOrderMappings.isPresent() || cartOrderMappings.get().isEmpty()) {
            return details;
        }

        // Set basic user details
        setupUserDetails(details, cart);

        // Get all orders
        List<CartOrderMapping> mappings = cartOrderMappings.get();
        List<Long> orderIds = extractOrderIds(mappings);
        List<OrderEntity> orders = orderEntityRepository.findAllById(orderIds);
        if (orders.isEmpty()) {
            return details;
        }

        // Set basic cart details
        setupPurchaseCartDetails(details, orders, cartId, orderIds);

        // Calculate and set amount details
        calculateAndSetPurchaseAmounts(details, orders);

        // Set warehouse and city information
        setupWarehouseDetails(details, orders.get(0).getId());

        // Set special offer details for purchase
        setupSpecialOfferDetails(details, orders);

        return details;
    }

    /**
     * Sets up user details in the cart order data
     */
    private void setupUserDetails(CartOrderDataDetails details, Cart cart) {
        if (cart == null || cart.getUserId() == null) {
            log.warn("Cart or userId is null, skipping user details setup");
            return;
        }
        
        Long userId = cart.getUserId();
        details.setUid(userId.toString());

        try {
            UserAndUserPreferenceCacheModel userPrefs = userServiceClientWrapper.getUserAndUserPreferences(
                userId, null, null, null);

            if (userPrefs == null) {
                log.warn("UserPrefs is null for userId: {}", userId);
                return;
            }
            
            if (userPrefs.getUserData() != null && userPrefs.getUserData().getUserRank() != null) {
                details.setRank(userPrefs.getUserData().getUserRank());

                if (!ObjectUtils.isEmpty(userPrefs.getUserData()) && 
                    UserRankConstants.NEW_LOGIN_USER_RANK.equals(userPrefs.getUserData().getUserRank())) {
                    details.setUserType(UserType.NEW.getValue());
                    return;
                }
            }
            else {
                log.error("UserData is null or has null rank for userId: {}", userId);
            }
            
            if (userPrefs.getUserPreferencesData() != null && userPrefs.getUserPreferencesData().getUserTypeNew() != null) {
                details.setUserType(userPrefs.getUserPreferencesData().getUserTypeNew());
            }
            else{
                log.error("UserPreferencesData is null or has null userType for userId: {}", userId);
            }
        } catch (Exception e) {
            log.error("Error while setting up user details for userId: {}, error: {}", userId, e.getMessage(), e);
        }
    }

    /**
     * Sets up basic cart details
     */
    private void setupCartDetails(CartOrderDataDetails details, List<OrderEntity> orders, 
                                  Long cartId, List<Long> orderIds, List<Long> passedOrderIds) {
        OrderEntity firstOrder = orders.get(0);
        
        details.setCartStatus(determineCartStatus(orders));
        details.setStatusType(getOrderStatus(orderIds, passedOrderIds).getValue());
        details.setPaymentMode(normalizePaymentType(firstOrder.getPaymentType()));
        details.setAppVersion(firstOrder.getAppVersion());
        details.setCartId(cartId.toString());
        details.setTotalQuantity(orderIds.size());
    }

    /**
     * Sets up purchase cart details
     */
    private void setupPurchaseCartDetails(CartOrderDataDetails details, List<OrderEntity> orders, 
                                          Long cartId, List<Long> orderIds) {
        OrderEntity firstOrder = orders.get(0);
        
        details.setPaymentMode(normalizePaymentType(firstOrder.getPaymentType()));
        details.setAppVersion(firstOrder.getAppVersion());
        details.setCartId(cartId.toString());
        details.setTotalQuantity(orderIds.size());
    }

    /**
     * Normalizes payment type (converts PAYTM to ONLINE)
     */
    private String normalizePaymentType(String paymentType) {
        return "PAYTM".equals(paymentType) ? "ONLINE" : paymentType;
    }

    /**
     * Extracts order IDs from cart order mappings
     */
    private List<Long> extractOrderIds(List<CartOrderMapping> mappings) {
        return mappings.stream()
            .map(CartOrderMapping::getOrderId)
            .collect(Collectors.toList());
    }

    /**
     * Gets distinct order IDs from the list
     */
    private List<Long> getDistinctOrderIds(List<Long> orderIds) {
        return orderIds.stream().distinct().collect(Collectors.toList());
    }

    /**
     * Validates that all passed order IDs belong to the cart
     */
    private void validateOrderIds(List<Long> cartOrderIds, List<Long> passedOrderIds) {
        if (!new HashSet<>(cartOrderIds).containsAll(passedOrderIds)) {
            throw new InvalidRequestException("Invalid order ids, please provide orderIds of same cart only!");
        }
    }

    /**
     * Calculates and sets amount details for cart orders
     */
    private void calculateAndSetAmounts(CartOrderDataDetails details, List<OrderEntity> orders, List<Long> passedOrderIds) {
        // Track total amounts
        BigDecimal totalAmount = BigDecimal.ZERO;
        BigDecimal totalBilledAmount = BigDecimal.ZERO;
        BigDecimal totalBuyingAmount = BigDecimal.ZERO;
        
        // Track discarded amounts
        BigDecimal totalDiscardedAmount = BigDecimal.ZERO;
        BigDecimal totalDiscardedBilledAmount = BigDecimal.ZERO;
        BigDecimal totalDiscardedBuyingAmount = BigDecimal.ZERO;
        
        // Calculate amounts
        for (OrderEntity order : orders) {
            // Add to total amounts
            totalAmount = totalAmount.add(order.getAmount());
            totalBilledAmount = totalBilledAmount.add(order.getBilledAmount());
            totalBuyingAmount = totalBuyingAmount.add(getBuyingPrice(order));
            
            // Add to discarded amounts if order is in passed order list
            if (passedOrderIds.contains(order.getId())) {
                totalDiscardedAmount = totalDiscardedAmount.add(order.getAmount());
                totalDiscardedBilledAmount = totalDiscardedBilledAmount.add(order.getBilledAmount());
                totalDiscardedBuyingAmount = totalDiscardedBuyingAmount.add(getBuyingPrice(order));
            }
        }
        
        // Calculate margins
        BigDecimal rupeeNetMargin = totalAmount.subtract(totalBuyingAmount);
        BigDecimal rupeeNetImpactedMargin = totalDiscardedAmount.subtract(totalDiscardedBuyingAmount);
        
        BigDecimal netMargin = calculatePercentageMargin(rupeeNetMargin, totalAmount);
        BigDecimal impactedNetMargin = calculatePercentageMargin(rupeeNetImpactedMargin, totalDiscardedAmount);
        
        // Set calculated values
        details.setCartAmount(totalAmount.doubleValue());
        details.setCartBilledAmount(totalBilledAmount.doubleValue());
        details.setImpactedOrdersAmount(totalDiscardedAmount.doubleValue());
        details.setImpactedOrdersBilledAmount(totalDiscardedBilledAmount.doubleValue());
        details.setCartRupeeNetMargin(rupeeNetMargin.setScale(2, RoundingMode.HALF_UP).doubleValue());
        details.setImpactedOrdersRupeeNetMargin(rupeeNetImpactedMargin.setScale(2, RoundingMode.HALF_UP).doubleValue());
        details.setCartNetMargin(netMargin.doubleValue());
        details.setImpactedOrdersNetMargin(impactedNetMargin.doubleValue());
    }

    /**
     * Calculates and sets amount details for purchase cart
     */
    private void calculateAndSetPurchaseAmounts(CartOrderDataDetails details, List<OrderEntity> orders) {
        // Track total amounts
        BigDecimal totalAmount = BigDecimal.ZERO;
        BigDecimal totalBilledAmount = BigDecimal.ZERO;
        BigDecimal totalBuyingAmount = BigDecimal.ZERO;
        
        // Calculate amounts
        for (OrderEntity order : orders) {
            // Add to total amounts
            totalAmount = totalAmount.add(order.getAmount());
            totalBilledAmount = totalBilledAmount.add(order.getBilledAmount());
            totalBuyingAmount = totalBuyingAmount.add(getBuyingPrice(order));
        }
        
        // Calculate margins
        BigDecimal rupeeNetMargin = totalAmount.subtract(totalBuyingAmount);
        BigDecimal netMargin = calculatePercentageMargin(rupeeNetMargin, totalAmount);
        
        // Set calculated values
        details.setCartAmount(totalAmount.doubleValue());
        details.setCartBilledAmount(totalBilledAmount.doubleValue());
        details.setCartRupeeNetMargin(rupeeNetMargin.setScale(2, RoundingMode.HALF_UP).doubleValue());
        details.setCartNetMargin(netMargin.doubleValue());
    }

    /**
     * Gets the buying price for an order (net buying price if available, otherwise buying price)
     */
    private BigDecimal getBuyingPrice(OrderEntity order) {
        Float netPrice = order.getNetBuyingPrice();
        if (netPrice != null && netPrice > 0) {
            return BigDecimal.valueOf(netPrice);
        }
        return BigDecimal.valueOf(order.getBuyingPrice());
    }

    /**
     * Calculate percentage margin based on amount and total
     */
    private BigDecimal calculatePercentageMargin(BigDecimal amount, BigDecimal total) {
        if (total.compareTo(BigDecimal.ZERO) == 0) {
            return BigDecimal.ZERO;
        }
        return amount.multiply(BigDecimal.valueOf(100))
            .divide(total, 2, RoundingMode.HALF_UP);
    }

    /**
     * Sets up warehouse and city details
     */
    private void setupWarehouseDetails(CartOrderDataDetails details, Long orderId) {
        Optional<List<OrderProductDetails>> productDetails = orderProductDetailsRepository.findByOrderId(orderId);
        if (!productDetails.isPresent() || productDetails.get().isEmpty()) {
            return;
        }

        OrderProductDetails firstProduct = productDetails.get().get(0);
        Integer warehouseId = firstProduct.getWarehouseId();
        
        WarehouseEntity warehouse = warehouseRepository.findById(Long.valueOf(warehouseId))
            .orElseThrow(() -> new InvalidRequestException("Warehouse not found"));

        details.setWarehouseId(warehouseId);
        details.setWarehouseName(warehouse.getWarehouseName());
        details.setCityId(warehouse.getCityId());

        City city = cityRepository.findById(Long.valueOf(warehouse.getCityId())).orElse(null);
        if (city != null) {
            details.setCityName(city.getName());
        }
    }

    /**
     * Populates order items in the cart details
     */
    private void populateOrderItems(CartOrderDataDetails details, List<OrderEntity> orders, Set<Long> passedOrderIds) {
        details.setOrders(new ArrayList<>());
        
        // Get all offer IDs
        List<String> offerIds = orders.stream()
            .map(OrderEntity::getOfferId)
            .collect(Collectors.toList());
            
        // Get deal data for all offers
        DealDataResponseModel dealData = getDealData(offerIds);
        
        // Create order items
        for (OrderEntity order : orders) {
            if (!passedOrderIds.contains(order.getId())) {
                continue;
            }
            
            CartOrderDataDetails.OrderData orderData = createOrderData(order, dealData);
            details.getOrders().add(orderData);
        }
    }

    /**
     * Sets up special offer details for purchase events
     */
    private void setupSpecialOfferDetails(CartOrderDataDetails details, List<OrderEntity> orders) {
        if (details == null || orders == null || orders.isEmpty()) {
            return;
        }
        details.setIsOrdAdded(false);
        details.setIsLdAdded(false);
        details.setIsFreeDealAdded(false);
        details.setCouponCode("");
        details.setCouponAmount("0.0");
        details.setWalletCash("0.0");

        try {

            // Create a map of orders for quick lookup
            Map<Long, OrderEntity> orderMap = orders.stream()
                    .collect(Collectors.toMap(OrderEntity::getId, order -> order, (o1, o2) -> o1));

            // Convert order IDs to a comma-separated string
            String orderIds = orders.stream()
                    .map(order -> String.valueOf(order.getId()))
                    .collect(Collectors.joining(","));

            double couponDiscountAmount = 0.0;
            double walletDiscountAmount = 0.0;

            // Fetch order discount details
            List<OrderDiscountInfoModel> orderDiscountInfo = schemeServiceClient.getOrderDiscountDetails(orderIds);
            if (orderDiscountInfo == null || orderDiscountInfo.isEmpty()) {
                return;
            }

            // Process discount details
            for (OrderDiscountInfoModel orderDiscount : orderDiscountInfo) {
                if (orderDiscount == null || orderDiscount.getOrderId() == null) {
                    continue;
                }

                OrderEntity order = orderMap.get(orderDiscount.getOrderId());
                if (order == null || orderDiscount.getOrderDiscountHistory() == null) {
                    continue;
                }

                for (OrderDiscountHistory history : orderDiscount.getOrderDiscountHistory()) {
                    if (history == null || history.getDiscountType() == null) {
                        continue;
                    }

                    switch (history.getDiscountType()) {
                        case ORD:
                            details.setOrdOfferId(order.getOfferId());
                            details.setIsOrdAdded(true);
                            break;
                        case LD:
                            details.setLdOfferId(order.getOfferId());
                            details.setIsLdAdded(true);
                            break;
                        case COUPON:
                            details.setCouponCode(history.getDiscountCode());
                            couponDiscountAmount += history.getDiscountAmount();
                            break;
                        case FREE_DEAL:
                            details.setFdOfferId(order.getOfferId());
                            details.setIsFreeDealAdded(true);
                            break;
                        case WALLETCASHBACK:
                            walletDiscountAmount += history.getDiscountAmount();
                            break;
                        default:
                            // Handle unknown discount types if needed
                            break;
                    }
                }
            }

            // Set final discount amounts (avoid null values)
            details.setWalletCash(String.valueOf(walletDiscountAmount));
            details.setCouponAmount(String.valueOf(couponDiscountAmount));
        }catch (Exception e) {
            log.error("Error while fetching special offer details: {}", e.getMessage(),e);
        }
    }

    /**
     * Gets deal data for offer IDs
     */
    private DealDataResponseModel getDealData(List<String> offerIds) {
        List<DownstreamService> downstreamServices = Arrays.asList(DownstreamService.DEAL_INDEX_SERVICE_VIEW,
            DownstreamService.ITEM_SERVICE_VIEW);
        DealDataRequestModel requestModel = productAggregatorService.prepareDataForProductAggregator(offerIds,downstreamServices);
        return productAggregatorService.getDealDataResponseModel(requestModel);
    }

    /**
     * Creates order data object for an order
     */
    private CartOrderDataDetails.OrderData createOrderData(OrderEntity order, DealDataResponseModel dealDataResponse) {
        CartOrderDataDetails.OrderData orderData = new CartOrderDataDetails.OrderData();
        
        // Find deal data for this offer
        ResponseDealData dealData = findDealData(dealDataResponse, order.getOfferId());
        if (dealData == null) {
            return orderData;
        }
        
        // Set basic order data
        orderData.setImpactedBilledAmount(order.getBilledAmount().doubleValue());
        orderData.setBilledAmount(order.getBilledAmount().doubleValue());
        
        // Set category data
        orderData.setL1CategoryId(dealData.getParentCategoryId().toString());
        orderData.setL2CategoryId(dealData.getCategoryId().toString());
        orderData.setL3CategoryId(dealData.getCategoryL3Id().toString());
        orderData.setCategoryNameL1(dealData.getCategoryNameL1());
        orderData.setCategoryNameL2(dealData.getCategoryNameL2());
        orderData.setCategoryNameL3(dealData.getCategoryNameL3());
        
        // Set offer data
        orderData.setOfferName(dealData.getTitle());
        orderData.setOfferId(order.getOfferId());
        orderData.setOfferSellingPrice(dealData.getPrice());
        orderData.setOfferDiscount(dealData.getMrp() - dealData.getPrice());
        
        // Set status
        orderData.setOrderStatus(order.getOrderStatus());
        orderData.setOrderSubStatus(order.getOrderSubStatus());
        
        // Calculate and set margins
        calculateOrderMargins(orderData, order);
        
        return orderData;
    }

    /**
     * Finds deal data for an offer ID
     */
    private ResponseDealData findDealData(DealDataResponseModel dealDataResponse, String offerId) {
        return dealDataResponse.getResponseDealDataList().stream()
            .filter(deal -> deal.getOfferId().equals(offerId))
            .findFirst()
            .orElse(null);
    }

    /**
     * Calculates and sets order margins
     */
    private void calculateOrderMargins(CartOrderDataDetails.OrderData orderData, OrderEntity order) {
        BigDecimal orderAmount = order.getAmount();
        BigDecimal buyingPrice = getBuyingPrice(order);
        
        BigDecimal rupeeNetMargin = orderAmount.subtract(buyingPrice);
        BigDecimal netMargin = calculatePercentageMargin(rupeeNetMargin, orderAmount);
        
        orderData.setOrderRupeeNetMargin(rupeeNetMargin.setScale(2, RoundingMode.HALF_UP).doubleValue());
        orderData.setOrderNetMargin(netMargin.doubleValue());
    }

    /**
     * Determines the cart status based on order statuses
     */
    private String determineCartStatus(List<OrderEntity> orders) {
        int deliveredCount = 0;
        int cancelledCount = 0;
        boolean isDelivered = false;
        
        for (OrderEntity order : orders) {
            if (isCancelledOrder(order.getOrderStatus())) {
                cancelledCount++;
            } else {
                if ("delivered".equalsIgnoreCase(order.getOrderStatus())) {
                    isDelivered = true;
                }
                deliveredCount++;
            }
        }
        
        if (deliveredCount == orders.size()) {
            return "Delivered";
        } else if (cancelledCount == orders.size()) {
            return "Cancelled";
        } else {
            return isDelivered ? "Partially Delivered" : "Partial Cancelled";
        }
    }

    /**
     * Checks if an order status is considered cancelled
     */
    private boolean isCancelledOrder(String status) {
        return "cancel".equalsIgnoreCase(status) || 
               "discarded".equalsIgnoreCase(status) || 
               "draft-cancelled".equalsIgnoreCase(status) || 
               "returned".equalsIgnoreCase(status);
    }

    /**
     * Checks if all orders are processed
     */
    private boolean isFullyProcessed(List<Long> orderList, List<Long> passedOrderIds) {
        return orderList != null && orderList.size() == passedOrderIds.size();
    }
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartCacheV2Service.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.CartAddOns.CartFreeDealCacheModel;
import com.dealshare.service.cartservice.models.CartDetailsCacheModel;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountPreference;
import com.dealshare.service.cartservice.models.CartDiscount.PromotionPreference;
import com.dealshare.service.cartservice.models.CartInfoModel;
import com.dealshare.service.cartservice.models.DealDetailRequestModel;

import java.util.List;
import java.util.Map;

/**
 * @author shubham.mandliya
 */


public interface CartCacheV2Service {

    void refreshCartCache(Long userId, String source, Long cartId);

    void updateCartCache(Long userId,
                         String source,
                         CartDetailsCacheModel cartDetailsCacheModel);

    void deleteCartCache(Long userId, String source);

    void deleteCartCache(String key);

    CartDetailsCacheModel getCartCache(Long userId,
                                       String source,
                                       Boolean dbFallback);

    CartInfoModel getUserCartEntity(Long userId, String source, Long cartId, Boolean createNewCart,
                                    DiscountPreference promotionPreference);

    void populateCacheForAssistBuyingAndRecommendedDeals(Map<Long, DealDetailRequestModel> dealDetailModelMap,
                                                                List<Long> dealsAddedOrUpdated,
                                                                List<Long> dealsDeleted,
                                                                Long cartId);

    void updateCartPromotionPreference(Long cartId, Long userId, String source,
                                       DiscountPreference promotionPreference);


    public void setFreeDealCartCache(String key,Long pkId);
    public void removeDealFromFreeDealCartCache(String key, Long pkId);
    public CartFreeDealCacheModel getFreeDealCartCache(String key);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CacheService.java

package com.dealshare.service.cartservice.services;

import java.util.List;
import java.util.Map;
import java.util.concurrent.TimeUnit;

public interface CacheService {

    default void set(String key, Object value, Long ttl) {
        set(key, value, ttl, false);
    }


    void set(String key, Object value, Long ttl, boolean silentFailure);

    default Object get(String key) {
        return get(key, false);
    }

    void set(String key, Object value);

    Object get(String key, boolean silentFailure);

    /** This get function written because some services redis config use with serialize the value & some not to handle this it creates */
    Object get(String key, boolean silentFailure,boolean objectMapper);

    void evict(String key);

    Boolean setnx(String key, Object value, Long ttl, boolean silentFailure);

    Boolean setnx(String key, Object value, Long ttl, boolean silentFailure, TimeUnit timeUnit);

    void evictMultiple(List<String> keys);

    List<Object> mget(List<String> keys, boolean silentFailure);

    void multiSet(Map<String, Object> cacheDataMap, Long ttl, boolean silentFailure);

    void addValueInSet(String key, Object value);

    void deleteValueFromSet(String key, Object value);

    Object getMembersOfSet(String key);

    void expire(String key, Long expiryTime, TimeUnit unit);
    void hSet(String hName, String key, Object value);

    Object hGet(String hName, String key) throws Exception;

    Object hGetAllKeys(String hName) throws Exception;

    Object hMGet(String hName, List<Object> keys) throws Exception;

    public Object hGetAll(String name) throws Exception;

    public void hDel(String hName, String key) throws Exception;
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/SchemeService.java

package com.dealshare.service.cartservice.services;

public interface SchemeService {

    Boolean getNewUser(String lang, String pincode, Long id);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/MovComputationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.UserCart;
import com.dealshare.service.cartservice.models.UserCartV2Model;

import java.math.BigDecimal;

public interface MovComputationService {

    BigDecimal getMovComputeAmount(UserCartV2Model userCartV2Model, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow);

    BigDecimal getMovComputeAmount(UserCart userCart, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserAddressService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.models.CreateOrder.UserAddressWarehouseResponseModel;
import com.dealshare.service.cartservice.models.UserCacheModel;
import com.dealshare.service.cartservice.models.userAddress.UserAddressInfo;

public interface UserAddressService {

    UsersAddressEntity getOrSaveUserAddress(UserAddressInfo userAddressInfo) throws Exception;

    UserAddressWarehouseResponseModel getUserAddressWarehouse(Boolean verifiedAddress, String pincode, Integer palId, String offerSellerType) throws Exception;

    void updateLastUsedAddress(Long userId, Long addressId, String orderStatus) throws Exception;

    UsersAddressEntity getUserAddress(UserCacheModel user) throws Exception;

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/ChatService.java

package com.dealshare.service.cartservice.services;

public interface ChatService {

    void sendWhatsappMessage(String userName, String userPhone, String productMessage);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.entities.OrderProductDetails;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.validation.annotation.Validated;

import java.io.IOException;
import java.util.List;
import java.util.Map;

@Validated
public interface CartService {

    void removeProductFromCart(DeleteCartItemRequestModel deleteCartItemRequestModel, String source, @UserIdValidation Long userId);

    void clearUserCart(@UserIdValidation Long userId, String source);

    Map<String, Integer> getCartItemCounts(String phone, String source);

    void updateDeliveryFeeInCart(Long userId, List<Integer> clusterIds, String pinCode, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow, Long cartId, UsersAddressEntity usersAddressEntity, CartParamsTransferModelDTO  cartParamsTransferModelDTO) throws IOException;

    void updateDeliveryFeeByCartId(Long cartId,Integer deliveryFee) throws IOException;

    AddressModel updateAddressForUserOrder(String phone, List<String> orderIds, AddressModel addressModel) throws Exception;

    Map<String, Boolean> checkInventory(CartOrderModel cartOrderModel, String source);

    List<DealAttribute> getBuyMoreDetails(String dealId, String pincode, String source, String dealAttributeId, @UserIdValidation Long userId);

    List<OrderProductDetails> orderSkuDataSave(UpdateSkuRequestModel updateSkuRequestModel);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/SingularService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.UserPreferences;

import java.util.Optional;

public interface SingularService {
    void pushSingularEvent(Long userId, Optional<UserPreferences> optionalUserPreferences);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/LatLongService.java

package com.dealshare.service.cartservice.services;

import java.util.List;

public interface LatLongService {

    void removeAddressIdCacheFromLaLongCache(Long userId, List<Long> addressIdList);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartUpdateService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.models.*;

public interface CartUpdateService {

    CartUpdateResponseModel addUpdateCart(CartUpdateRequestModel cartUpdateRequestModel,
                                          Long userId,
                                          String source,
                                          String lang,
                                          String appVersion,
                                          String pincode,
                                          Integer palId, CartParamsTransferModelDTO cartParamsTransferModelDTO);

    UserCartResponseModel updateCart(CartUpdateRequestModel cartUpdateRequestModel,
                                            Long userId,
                                            String source,
                                            String lang,
                                            String appVersion,
                                            String pincode,
                                            Integer palId, Boolean juspayEnabled, CartParamsTransferModelDTO cartParamsTransferModelDTO);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/StaticPropertyService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.StaticPropertiesEntity;
import com.dealshare.service.cartservice.models.AbuseVersionStaticPropertyModel;


import com.dealshare.service.cartservice.models.StaticPropertiesRequestModel;
import java.util.List;
import java.util.Map;
import java.util.Optional;

public interface StaticPropertyService {

    Optional<StaticPropertiesEntity> getProperty(String propertyKey, String propertyName, String lang);

    String getStaticPropertyCache(String propertyKey, String propertyName, String lang);

    String getKey(String propertyKey, String propertyName, String lang);

    Map<String, String> getMultiStaticPropertyMap(String lang, List<StaticPropertiesRequestModel> requestList);

    AbuseVersionStaticPropertyModel getAbuseVersionStaticProperty(String propertyKey, String propertyName);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartConfigService.java

package com.dealshare.service.cartservice.services;


import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.entities.CartConfig;
import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.feemodule.models.dto.CartConfigFilter;
import com.dealshare.service.cartservice.feemodule.models.dto.WarehouseResponseDto;
import com.dealshare.service.cartservice.models.ActiveClusterUserMovModel;
import com.dealshare.service.cartservice.models.CartConfigModel;
import com.dealshare.service.cartservice.models.ClusterMovRequestModel;
import com.dealshare.service.cartservice.models.LocationV3Model;
import com.dealshare.service.cartservice.models.OrdConfigModel;
import com.dealshare.service.cartservice.models.UserCart;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;

import java.io.IOException;
import java.util.List;
import java.util.Map;

public interface CartConfigService {

    UserCart getCartConfig(String pinCode, UserCart userCart, String source, LocationV3Model locationV3Model, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow, Integer warehouseId, UsersAddressEntity usersAddressEntity, CartParamsTransferModelDTO cartParamsTransferModelDTO) throws IOException;

    CartConfigModel createConfig(CartConfigModel cartConfigModel) throws IOException;

    CartConfig getCartConfig(Long configId);

    CartConfigModel getCartConfigData(Long configId) throws IOException;

    List<CartConfigModel> getAllCartConfig(String source) throws Exception;

    Boolean addClusterOrdMov(ClusterMovRequestModel clusterMovRequestModel) throws Exception;

    CartConfigModel updateConfig(CartConfigModel cartConfigModel,Boolean userMeta) throws IOException;

    UserCart appendCartTitleAndDesc(UserCart userCart, CartConfig cartConfig, Integer locationId, String source, String pinCode,UsersAddressEntity usersAddressEntity,CartParamsTransferModelDTO cartParamsTransferModelDTO)
            throws IOException;

    void cacheAllConfigInRedis();

    Map<String, String> fetchOrdCartMov(Integer activeOrdsInCart, CartConfig cartConfig) throws IOException;

    List<ActiveClusterUserMovModel> getActiveClusterOrdMov();

    Boolean deleteClusterOrdMov(ActiveClusterUserMovModel activeClusterUserMovModel);

    OrdConfigModel fetchOrdConfig(String userRank, String source,  List<Integer> clusterIds, String lang);

    Map<String, Object> getCartConfig(Long userId,
                              String phone,
                              String pinCode,
                              List<Integer> clusterIds,
                              String userRank,
                              String source,
                                      String lang
                                  );

    CartConfig getCartConfigForCluster(List<Integer> clusterIds);

    Page<CartConfigModel> getPagedCartConfigs(CartConfigFilter filter, Pageable pageable);

    WarehouseResponseDto getAllActiveWarehouses();
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/ProductAggregatorService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.common.LocationInfo;
import com.dealshare.common.dtos.common.UserInfo;
import com.dealshare.productaggregatorservice.models.productaggregator.DealDataRequestModel;
import com.dealshare.productaggregatorservice.models.productaggregator.DealDataResponseModel;
import com.dealshare.service.cartservice.entities.Product;
import com.dealshare.service.cartservice.enums.DownstreamService;

import java.util.List;

/**
 * @author shubham.mandliya
 */
public interface ProductAggregatorService {
    DealDataResponseModel getDealDataResponseModel(DealDataRequestModel dealDataRequestModel);

    DealDataRequestModel prepareDataForProductAggregator(List<String> offerIds,  List<DownstreamService> downstreamServices);

    DealDataRequestModel prepareDataForProductAggregatorWithLocationAndUser(UserInfo userInfo,
                            LocationInfo locationInfo, List<Long> offerpkIds, List<String> offerIds,
                            List<DownstreamService> downstreamServices, String lang);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/ProductService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.ProductOffer;

public interface ProductService {
    ProductOffer getValidDeal(String offerId, Long pincode);

    ProductOffer getDeal(String offerId);

    ProductOffer validateProductOffer(String offerId, int quantity);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/OfferCommService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.common.LocationInfo;
import com.dealshare.common.dtos.common.UserInfo;
import com.dealshare.common.dtos.orchestration.cp.cartservice.request.OfferCommFcRequest;
import com.dealshare.common.dtos.orchestration.cp.cartservice.response.OfferCommFcResponse;
import com.dealshare.service.cartservice.models.CartDiscount.CartPageDeal;
import com.dealshare.service.cartservice.models.HomePageStripRequest;
import java.util.List;

public interface OfferCommService {
    OfferCommFcResponse getAllOfferCommForUser(OfferCommFcRequest offerCommRequest, String lang);

    OfferCommFcResponse getAllOfferCommForUser(UserInfo userInfo, LocationInfo locationInfo,
                                               String lang);

    List<CartPageDeal> getAllProductPromotions(HomePageStripRequest pageStripRequest, String lang,
                                               Long userIdFinal, Long pincode, Long palId);

    OfferCommFcResponse getAllCartOfferCommunicationV2(List<OfferCommFcRequest> offerCommRequest, String lang);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/AppsFlyerService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.ingestion.AppsFlyerDataEventModel;
import com.dealshare.common.dtos.ingestion.AppsFlyerEventType;
import com.dealshare.common.dtos.ingestion.AppsFlyerSupportedEventAppTypes;
import com.dealshare.service.cartservice.models.AppsFlyer.AppsFlyerEventTransfer;
import com.dealshare.service.cartservice.services.impl.SqsPublisherService;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import java.time.LocalDateTime;
import java.util.Objects;

@Service
@Slf4j
public class AppsFlyerService {


    @Autowired
    private SqsPublisherService sqsPublisherService;


    @Value("${appsflyer.sqs.endpoint}")
    private String appsFlyerSqsEndpoint;

    public void pushAppsFlyerEvent(AppsFlyerEventTransfer appsFlyerEventTransfer) {
        if(Objects.isNull(appsFlyerEventTransfer.getAppsflyerId()) || appsFlyerEventTransfer.getAppsflyerId().isEmpty() || Objects.isNull(appsFlyerEventTransfer.getDeviceId()) ||
                appsFlyerEventTransfer.getDeviceId().isEmpty() || Objects.isNull(appsFlyerEventTransfer.getPlatform())  ||
                appsFlyerEventTransfer.getPlatform().isEmpty() || Objects.isNull(appsFlyerEventTransfer.getUserId())){
            log.error("AppsFlyerId or DeviceId or Platform is null or empty for user: {} for eventName : {} , data :  {}", appsFlyerEventTransfer.getUserId(),appsFlyerEventTransfer.getEventName(), appsFlyerEventTransfer);
            return;
        }

        try {
            AppsFlyerSupportedEventAppTypes eventAppTypes = AppsFlyerSupportedEventAppTypes.fromValue(appsFlyerEventTransfer.getPlatform());

            AppsFlyerDataEventModel appsFlyerDataEventModel = AppsFlyerDataEventModel.builder()
                    .appsflyerId(appsFlyerEventTransfer.getAppsflyerId())
                    .deviceId(appsFlyerEventTransfer.getDeviceId())
                    .appType(eventAppTypes)
                    .customerUserId(appsFlyerEventTransfer.getUserId())
                    .eventTime(LocalDateTime.now().toString())
                    .eventName(appsFlyerEventTransfer.getEventName())
                    .cartId(appsFlyerEventTransfer.getCartId())
                    .eventValue(appsFlyerEventTransfer.getEventValue())
                    .advertisingId(appsFlyerEventTransfer.getAdvertisingId())
                    .build();
            sqsPublisherService.publishMessage(appsFlyerSqsEndpoint, appsFlyerDataEventModel);
        }catch (Exception e) {
            log.error("Error while pushing AppsFlyer event for user: {} for event : {}, msg : {}", appsFlyerEventTransfer.getUserId(), appsFlyerEventTransfer, e.getMessage(), e);
        }
    }

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/LocationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.LocationV3Model;

public interface LocationService {
    LocationV3Model getLocationDataFromPinCodeV3(String pincode, Long userId, String source, Integer palId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartServiceV3.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.validation.annotation.Validated;

@Validated
public interface CartServiceV3 {

    AddProductResponseModel addProductToCart(CartRequestModel cartRequestModel, String source, @UserIdValidation Long userId, String appVersion, String platform) throws Exception;

    void refreshCache();

}

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/SmsService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.models.UserCartSmsModel;

import java.util.Map;

public interface SmsService {

    void sendSms(Order Order, String lang);

    void sendCancelSms(String template, Map<String,String> data, String phone);

    void sendCartSms(User user,  UserCartSmsModel userCartSmsModel);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/InventoryService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.*;

import java.util.List;
import java.util.Map;

public interface InventoryService {

    void removeInventory(Long orderId,Long quantity,Long offerPkId,String offerId, Long userId);
    Map<String, DealInventoryStatusModel> getInventoryMap(List<CartItemV2Model> cartItems, String source,
                                                          LocationV3Model locationV3Model, Long userId);

    }


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/QuickCheckoutService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;

import java.util.List;

public interface QuickCheckoutService {

    QuickCartOrderSummaryModel getOrderSummary(String offerId, String source, String pinCode, String lang,
                                               String referralToken, @UserIdValidation Long userId, Integer quantity,
                                               GetCartRequestModel getCartRequestModel, String cartType) throws Exception;

    List<DealLevelPromotion> getDealLevelPromotionModel(List<CartItem> cartItems);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/GatewayService.java

package com.dealshare.service.cartservice.services;

public interface GatewayService {
    void logoutUserAll(Long userId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartServiceV2.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.entities.Cart;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.http.ResponseEntity;

import java.io.IOException;
import java.util.List;
import java.util.Map;
import java.util.Optional;

//@Validated
public interface CartServiceV2 {

    OrderStatusWidgetStaticModel getOrderStatusWidgetFromStaticProperties(String lang);

    void addProductToCart(CartRequestModel cartRequestModel, String source, AddProductResponseModel addProductResponseModel, @UserIdValidation Long userId, String appVersion, String platform) throws Exception;

    UserCart getCart(GetCartRequestModel userId, String source, String lang, Long userIdFinal, String authKey, String appVersion, String platform, Long palId,CartParamsTransferModelDTO cartParamsTransferModelDTO) throws Exception;

    ResponseEntity<?> validateUserCart(CartModel cartRequestModel, @UserIdValidation Long userId,String pincode, String appVersion, String platform, Long palId,CartParamsTransferModelDTO cartParamsTransferModelDTO) throws Exception;

    CartModel getPricingSnapShot(Long cartId, @UserIdValidation Long userId);

    ResponseEntity<?> cloneCart(Long cartId, @UserIdValidation Long userId);

    CartOrderModel placeOrderV2(CartOrderModel cartOrderModel, String lang, String source, @UserIdValidation Long userId, int cpVersion,String pincode, String appVersion, Integer palId, String platform, String authorizationRefresh, String appsFlyerId, String deviceId,CartParamsTransferModelDTO cartParams) throws Exception;

    void raisePostOrderEvents(CartOrderModel cartOrderModel, Long userId, String source, CartParamsTransferModelDTO cartParams);
    void raiseOrderTrustSentinelEvents(CartOrderModel cartOrderModel, Long userId, String source,
                                       String pincode, String appVersion, String platform, String deviceId,
                                       Integer palId, String lat, String lng, String requestId,
                                       String visitorId, String appType, String clientIp);

    ScratchCardModel postOrderScratchCard(PostOrderScratchCardModel postOrderScratchCardModel)throws Exception;

    boolean registerExpressDelCart(OptExpressDelRequestModel requestModel);

    boolean validUserForScratchCard(Long userId,Map<String,StaticPropertiesModel> staticPropertiesMap,Long orderAmount);

    void updateProductToCart(CartRequestModel cartRequestModel, String source, @UserIdValidation Long userId,String pincode, String appVersion, String platform) throws Exception;

    UserCart computeUserCarts(Cart cart, User user, String cartSource, UserCart userCartModel,
                              LocationV3Model locationV3Model, String lang, Boolean applyRefund,
                              Boolean applyWalletCashback, String appVersion, Boolean cartLevelDeliveryFee,

                              Boolean deliveryFeeCentralisationFlow,
                              Integer warehouseId, String platform, Boolean isBankCouponApplied, Long palId, UsersAddressEntity usersAddressEntity,CartParamsTransferModelDTO cartParamsTransferModelDTO) throws IOException;

    Boolean checkTokenSource(String tokenSource, String requestSource, String paramSource);

    CartAmountDetailsResponseModel getCartDetails(Long id) throws Exception;

    CartOrderDetailsResponseModel getCartOrderDetails(Long id) throws Exception;

    Boolean syncDeliveryFees(List<SyncDeliveryFeesModel> syncDeliveryFeesModels);

    DiscountDeliveryFeeAggregatorResponse getDiscountDeliveryFeeAggregateData(DiscountDeliveryFeeAggregatorRequest request);

    Optional<Cart> getCartDetailsByOrderId(Long orderId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/OfferService.java

package com.dealshare.service.cartservice.services;

import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;

@Service
@Slf4j
public class OfferService {

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/DealInventoryCheckService.java

package com.dealshare.service.cartservice.services;


import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.models.CartItem;
import com.dealshare.service.cartservice.models.CartItemV2Model;
import com.dealshare.service.cartservice.models.InventoryValidationResponseModel;
import com.dealshare.service.cartservice.models.LocationV3Model;
import java.util.List;

public interface DealInventoryCheckService {

    InventoryValidationResponseModel validateInventory(List<CartItem> cartItems, User user,
        String source, LocationV3Model locationV3Model);

    InventoryValidationResponseModel validateInventoryV2(List<CartItemV2Model> cartItems,
                                                         String source,
                                                         LocationV3Model locationV3Model, Long userId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserOrderStatusConfirmationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.*;

public interface UserOrderStatusConfirmationService {
    UserConfirmationFormModel fetchUserConfirmationForm(UserReviewFormRequestModel userReviewFormRequestModel);
    RejectOrderStatusResponseModel rejectOrderStatusConfirmation(RejectOrderStatusRequestModel requestModel);
    AcceptOrderStatusResponseModel acceptOrderStatusConfirmation(AcceptOrderStatusRequestModel requestModel);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/PromotionService.java

//package com.dealshare.service.cartservice.services;
//
//import com.dealshare.service.cartservice.models.*;
//import org.springframework.stereotype.Service;
//
//import java.util.List;
//import java.util.Map;
//
//@Service
//public interface PromotionService {
//
//    void getCartLevelDiscounting(UserCart userCart, List<CartItem> cartItems, Long userId, Map<String, Integer> offerCategoryMap);
//
//}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/BargainDealService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.CartItem;

import java.util.List;
import java.util.TreeMap;

public interface BargainDealService {

    void overrideWithBargainPrice(CartItem cartItem, TreeMap<String, Object> priceMap);

    void turnOffBargainFlagForDeal(List<Long> deals, String phone);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/QueueProducer.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.cart.OrderTrustSentinelEvent;
import com.dealshare.common.dtos.common.kafka.OrderUpdateEventDetail;
import com.dealshare.common.dtos.ingestion.ThirdPartyDataPushEventModel;
import com.dealshare.service.cartservice.models.OrdersStatusUpdateEvent;
import com.dealshare.service.cartservice.models.kafka.CancelOrderSellerSyncModel;
import com.dealshare.service.cartservice.models.kafka.KafkaCancellationRequestModel;

public interface QueueProducer {

    void produceOrderCancellationSyncEvent(KafkaCancellationRequestModel payLoad);

    void produceThirdPartySyncEvent(ThirdPartyDataPushEventModel payLoad);

    void sendUserOrderTrustSentinelEvent(OrderTrustSentinelEvent payLoad);

    void pushOrderCancelToSellerSync(CancelOrderSellerSyncModel payload);

    void sendOrdersStatusUpdateTopic(OrdersStatusUpdateEvent ordersStatusUpdateEvent);

    void sendOrderPlacedUserSMSCommunicationEvent(OrderUpdateEventDetail orderUpdateEventDetail);

}

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/KeycloakService.java

package com.dealshare.service.cartservice.services;

/**
 * Service for Keycloak operations
 */
public interface KeycloakService {
    
    /**
     * Get the current authenticated username
     * @return The username or null if not authenticated
     */
    String getCurrentUsername();
    
    /**
     * Get the current authenticated user's email
     * @return The email or null if not authenticated
     */
    String getCurrentUserEmail();
} 

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartPropertiesService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.cart.request.CartPropertiesRequest;
import com.dealshare.common.dtos.cart.response.CartPropertiesResponse;

public interface CartPropertiesService {
    public CartPropertiesResponse getCartProperties(CartPropertiesRequest request);

    public void deleteCartProperties();
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/MyOrderService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.BulkOrderReturnWalletUpdate;
import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.exceptions.ValidationException;
import com.dealshare.service.cartservice.exceptions.ValidationExceptionV2;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.models.RevertDiscount.BulkCartDiscountRevertRequest;
import com.dealshare.service.cartservice.models.RevertDiscount.BulkCartDiscountRevertResponse;
import com.dealshare.service.cartservice.models.RevertDiscount.RevertDiscountBreachResponse;
import com.dealshare.service.cartservice.models.RevertDiscount.UserBreachDiscountRequest;
import com.dealshare.service.cartservice.models.Wallet.WalletRefundCreditModel;
import com.dealshare.service.cartservice.models.chatbot.ActiveCartIdsRequestModel;
import com.dealshare.service.cartservice.models.kafka.KafkaCancellationRequestModel;
import com.dealshare.service.cartservice.models.minimart.OrderSyncRequestModel;
import com.dealshare.service.cartservice.models.minimart.OrderSyncResponseModel;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import com.fasterxml.jackson.core.JsonProcessingException;
import org.springframework.http.ResponseEntity;

import java.io.IOException;
import java.util.List;
import java.util.Map;

public interface MyOrderService {

    MyOrderResponseModel getOrdersBasedOnPhone(Integer pageNo, Integer pageSize, String phone, String lang,
                                               String pinCode, String source) throws Exception;

    String fetchDealImage(Long offerId);

    Object cancelOrder(OrderCancelModel orderCancelModel, @UserIdValidation Long userId, Integer palId, Boolean isInternalServiceCall) throws ValidationException, ValidationExceptionV2;

    Object cancelAllOrder(List<OrderCancelModel> orderCancelModelList, Long userId, Integer palId) throws Exception;

    OrderDetailModel getOrderDetail(Long id, String lang) throws Exception;

    OrderMovModel checkMinimumMovPerDay(String phone, String source, String pinCode) throws IOException;

    RejectOrderStatusResponseModel rejectOrderStatusConfirmation(RejectOrderStatusRequestModel requestModel);

    AcceptOrderStatusResponseModel acceptOrderStatusConfirmation(AcceptOrderStatusRequestModel requestModel);

    UserConfirmationFormModel fetchUserReviewForm(UserReviewFormRequestModel userReviewFormRequestModel) throws IOException;

    NroOrderResponseModel registerNroOrders(NroOrderRequestModel requestModel);

    void discardOrder(Order order, Long cartId, boolean cloneCart);

    void orderCancellation(KafkaCancellationRequestModel kafkaPayload, Boolean cartLevelDeliveryFee, Boolean isInternalServiceCall);

    void clearRedisKey(Long orderId);

    Boolean setCartOrderCancellationKey(Long orderId);

    void clearCartOrderCancellationKey(Long orderId);

    void clearAllRedisKey(List<Long> orderIds);

    List<Long> bulkCancelWalletUpdate(BulkCancelWalletCreditModel bulkCancelWalletCreditModel);

    BulkOrderReturnWalletUpdate bulkReturnWalletUpdate(BulkCancelWalletCreditModel bulkCancelWalletCreditModel);

    BulkOrderReturnWalletUpdate refundOrderWalletCredits(WalletRefundCreditModel walletRefundCreditModel);

    void triggerOrderStatusNotification(OrderStatusChangeCommModel orderStatusChangeCommModel);

    void triggerOrderStatusNotificationBulk(BulkOrderStatusChangeCommModel bulkOrderStatusChangeCommModel);

    BulkCartDiscountRevertResponse bulkDiscountRevert(BulkCartDiscountRevertRequest bulkCartDiscountRevertRequest);

    ResponseEntity<?> updateOrderStatus(UserAddressOrderModel userAddressOrderModel);

    DoorStepDeliveryFeeUpdateResponseModel updateDoorStepDeliveryFee(DoorStepDeliveryFeeUpdate doorStepDeliveryFeeUpdate)
        throws JsonProcessingException;

    ResponseEntity<?> cancelAllOrders(List<OrderCancelModel> orderCancelModelList);

    long getOnlineRefundAmount(long orderId);

    OrderSyncResponseModel minimartOrderSync(OrderSyncRequestModel orderSyncRequestModel);


    void addShipmentDetails(Long userAddressId, Long userId, Long orderId);

    RevertDiscountBreachResponse getUserCartBreachSummary(String lang, UserBreachDiscountRequest userBreachDiscountRequest);

    ResponseEntity<?> getCartDetails(CartDetailsRequestModel cartDetailsRequestModel) throws Exception;

    List<Long> getActiveCartIds(ActiveCartIdsRequestModel activeCartIdsRequestModel);

    void triggerOrderCancelEventSyncCall(Long userId,OrderCancelModel orderCancelModel);

    List<Long> getOrderIds(List<OrderCancelModel> orderCancelModelList);

    Map<Long, List<Long>> prepareCartOrdersMap(List<Long> orderIs);

    List<Order> completeCartCancelledWithoutCustomerFault(List<Long> orderIs, List<String> status, List<String> subStatus);

    ResponseEntity<?> triggerEvent(OrdersStatusUpdateEvent ordersStatusUpdateEvent);

    void cancelPendingOrdersPaymentSuccessFull();

    Boolean setFileNameCancellationKey(String fileName);

    void clearFileNameCancellationKey(String fileName);

    }

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserCartService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.constants.AppSource;
import com.dealshare.service.cartservice.constants.UserCartType;
import com.dealshare.service.cartservice.constants.UserCartStatus;
import com.dealshare.service.cartservice.entities.CartItemCacheEntity;
import com.dealshare.service.cartservice.entities.CustomerPoints;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.models.UserDetails.UserDetailResponseModel;
import com.dealshare.service.cartservice.models.chatbot.CartDetailsResponseModel;
import com.dealshare.service.cartservice.models.chatbot.OrderListResponseModel;
import com.dealshare.service.cartservice.models.chatbot.RecentCartsResponseModel;
import com.dealshare.service.cartservice.models.chatbot.*;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;


import java.io.IOException;
import java.util.List;
import java.util.Map;

public interface UserCartService {

    ReturnResponseModel getReturnsModule(Long userId, String phone, String timePeriod, Long returnId, Long cartId, Long orderId,String entityId, int page, int size);

     List<CustomerPoints> walletTransactions(Long userId, String timePeriod, Long cartId, Long orderId);

     List<TransactionsModuleModel> getTransactionsModule(Long userId,Long cartId, String phone, String timePeriod);

     List<DiscountBifurcationModel> getDiscountBifurcation(Long cartId, Long orderId);

    public CartOrderResponse getCartOrders(Long userId,String phoneNo, String timePeriod,String entityId, int page, int size, String status ,Long cartId,Long orderId, String productName, Boolean metaData, String sort);

    OrderListResponseModel getOrderList(Long cartId,Long userId, int page, int size);

    Boolean getReturnableFlag(Long orderId,Long userId);

    CartDetailsResponseModel getCartDetailsChatbot(Long userId, Long cartId);

    CartDetailsResponseModel cartDetailsFormatter(Map<Long, UserCartDetailsResponseModel> cartDetails, Long cartId, LocationV3Model pincodeData, List<Long> orderIds, PaymentDetailsResponseModel paymentData, String entityId);

    RecentCartsResponseModel getRecentCarts(Long userId, int page, int size);

    List<UserCartModel> getAllCarts(String phone, AppSource source, String lang, UserCartStatus cartStatus, UserCartType cartType, Integer pageNo, Integer pageSize, @UserIdValidation Long userId);

    UserCartDetailsModel getCartDetails(String phone, UserCartType cartType, Long id, String lang, String pincode, String authKey, @UserIdValidation Long userId, String source, String appVersion, String platform) throws IOException;

    UserCartOrderDetailsModel getAllOrders(String phone,AppSource source,UserCartStatus cartStatus,Long userId, Integer pageNo,String lang, String pincode,Integer pageSize,String authKey);

    List<UserCartModel> getCartsFromOrderIds(List<Long> orderIds, String lang);

    UserCartProducts getProductsQuantityMapping(@UserIdValidation Long userId, String source, String pincode) throws Exception;

    void updateProductsQuantityMapping(CartItem cartDetailsModel, Long userId, Long dealAttributeId);

    void updateProductsQuantityMapping(CartItemCacheEntity cartDetailsModel, Long userId);

    void deleteProductsQuantityMapping(String dealId, Long userId) throws Exception;

    UserDetailResponseModel getUserDetails(Long userId, Integer timePeriod, String entityId);

    Map<Long, List<Long>> getCartAndAllOrderMap(Long cartId);
    Long getCartUserMapping(Long cartId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/DeliveryFeeService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.entities.CartConfig;
import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.feemodule.enums.FeesType;
import com.dealshare.service.cartservice.models.CartDiscount.DiscountSummaryItem;
import com.dealshare.service.cartservice.models.DeliveryConfig;
import com.dealshare.service.cartservice.models.OrderValueModel;
import com.dealshare.service.cartservice.models.UserCacheModel;
import com.dealshare.service.cartservice.models.UserCart;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;
import org.springframework.validation.annotation.Validated;


import java.io.IOException;
import java.math.BigDecimal;
import java.util.List;
import java.util.Map;
import java.util.Objects;

//@Validated
public interface DeliveryFeeService {

   void applyDeliveryFees(DeliveryConfig deliveryConfig, CartConfig cartConfig, Float cartValue, Long orderValue, BigDecimal deliveryFee);

   String getDeliveryMessage(String lang);

    OrderValueModel getOrderValue(Long userId,String phone, String pinCode,Long userAddressId)throws IOException;

    Float getCartValue(UserCart userCart) ;

    Map<String, Object> appendCartTitleAndDesc(DeliveryConfig deliveryConfig, CartConfig cartConfig, Integer clusterId, String source,
                                                 Long userId, String phone, String pinCode, Boolean cartLevelDeliveryFee,
                                                 Boolean deliveryFeeCentralisationFlow, Long cartId , List<DiscountSummaryItem> discountSummaryItemList,
                                                 Integer warehouseId, String userRank, UsersAddressEntity usersAddressEntity, UserCacheModel user, CartParamsTransferModelDTO cartParamsTransferModelDTO) throws IOException;

    void excludeLocationsFromOnlinePayment(Integer clusterId, DeliveryConfig deliveryConfig) ;

    void transferValuesFromDeliveryConfigToUserCart(Map<String, Object> feesMap, DeliveryConfig deliveryConfig , UserCart userCart);

    CartConfig fetchCartConfigForDeliveryFee(Integer clusterId,String source,List<Integer> clusterIds);

    DeliveryConfig deliveryFeeConfig(@UserIdValidation Long userId, String phone, String pinCode, String cartType, List<Integer> clusterIds)throws IOException;

    boolean isRefundApplied(UserCart userCart);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/RateLimiterService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.RateLimiterConfigModel;

import java.util.List;

public interface RateLimiterService {

    List<RateLimiterConfigModel> getRateLimit();

    void setRateLimit(List<RateLimiterConfigModel> rateLimiterConfigModelList);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/PointsService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.entities.OrderEntity;
import com.dealshare.service.cartservice.models.BulkCancelWalletCreditModel;
import com.dealshare.service.cartservice.models.CustomerPoints.CartWalletDiscountAmountRequestModel;
import com.dealshare.service.cartservice.models.CustomerPoints.DebitedIncentiveRequestModel;
import com.dealshare.service.cartservice.models.CustomerPoints.DebitedMyDiscountCartRequestModel;
import com.dealshare.service.cartservice.models.DealPromotionBifurcation;
import com.dealshare.service.cartservice.models.Wallet.WalletRefundCreditModel;

import java.util.List;
import java.util.Map;

public interface PointsService {

    void creditWallet(Long userId, Long planId, Long Id, List<Long> excludedIncentivePlans,
                      Map<Long, Float> pointsUseMap);

    Map<Long, Float> creditReturnOrderCustomerPoints(List<Order> ordersData);

    Map<Long, Float> creditOrderCustomerPoints(Order ordersData, WalletRefundCreditModel walletRefundCreditModel);

    void debitedIncentiveNew(DebitedIncentiveRequestModel debitedIncentiveRequestModel);

    void debitedMyDiscountCart(DebitedMyDiscountCartRequestModel debitedMyDiscountCartRequestModel, OrderEntity order);

    OrderEntity cartWalletDiscountAmount(List<DealPromotionBifurcation> dealPromotionBifurcationList, OrderEntity order);

    List<Long> bulkCreditWallet(List<Order> orderData, List<Long> excludedIncentivePlans);

    void bulkDebitWallet(List<DebitedIncentiveRequestModel> models);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserOrderCartService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.models.OrderListModel;

public interface UserOrderCartService {

    OrderListModel getUserOrder(Order order, String lang);

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserShipmentService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.constants.AppSource;
import com.dealshare.service.cartservice.models.UserShipmentDetailsModel;
import com.dealshare.service.cartservice.models.UserShipmentModel;
import com.dealshare.service.cartservice.validators.userId.UserIdValidation;

import java.io.IOException;
import java.util.List;

public interface UserShipmentService {

    List<UserShipmentModel> getAllShipments(@UserIdValidation Long userId, AppSource source) throws IOException;

    UserShipmentDetailsModel getShipmentDetails(@UserIdValidation Long userId, Long shipmentId, String lang) throws IOException;
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserSessionService.java

package com.dealshare.service.cartservice.services;

/**
 * Service for managing user session information
 */
public interface UserSessionService {
    
    /**
     * Set the MySQL session variable for cart_config operations
     * to track who made the changes
     * @param username The username to set
     */
    void setCartConfigUser(String username);
} 

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/PriceChopService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.CartItem;
import com.dealshare.service.cartservice.models.UserCart;

import java.util.List;
import java.util.TreeMap;

public interface PriceChopService {
    void overrideWithPriceChopDealPrice(CartItem cartItem, TreeMap<String, Object> priceMap);

    void turnOffPriceChopFlagForDeal(List<Long> priceChopIds, Long userId);

    UserCart addConfigForPriceChopCart(UserCart userCart, String source);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartConfigV2Service.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.entities.UsersAddressEntity;
import com.dealshare.service.cartservice.models.LocationV3Model;
import com.dealshare.service.cartservice.models.UserCart;
import com.dealshare.service.cartservice.models.UserCartV2Model;

import java.io.IOException;
import java.util.List;

public interface CartConfigV2Service {

    UserCart getCartConfig(String pinCode, UserCart userCart, String source, User user, LocationV3Model locationV3Model, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow, Integer warehouseId, UsersAddressEntity usersAddressEntity,CartParamsTransferModelDTO cartParamsTransferModelDTO) throws IOException;

    void computeCartConfigV2(UserCartV2Model userCart, List<Integer> clusters, Boolean cartLevelDeliveryFee, Boolean deliveryFeeCentralisationFlow, Integer warehouseId, CartParamsTransferModelDTO cartParamsTransferModelDTO) throws IOException;
}

=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/DiscountService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.common.juspay.request.JusPayPaymentMethodInfo;
import com.dealshare.service.cartservice.entities.OrderDiscountingHistory;
import com.dealshare.service.cartservice.models.CartDiscount.CartDiscountResponseV2Model;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.models.Discount.GetAvailableOffersRequest;
import com.dealshare.service.cartservice.models.Discount.GetAvailableOffersResponse;

import java.util.List;

/**
 * @author shubham.mandliya
 */

public interface DiscountService {
    CartDiscountResponseV2Model getCartDiscount(UserCartV2Model userCart,
                                                Boolean applyRefund,
                                                Boolean applyWalletCashback, Boolean isOldVersion,
                                                List<JusPayPaymentMethodInfo> jusPayPaymentMethodInfoList,
                                                Long palId, UserCacheModel userCacheModel, LocationV3Model locationV3Model, String appVersion, String platform);

    void populateDealDiscountDetails(UserCartV2Model userCartV2Model);

    void populateDealDiscountDetailsV2(List<CartItemV2Model> cartItems);

    void populateDelFeeAndMrp(UserCartV2Model userCartV2Model, Boolean deliveryFeeCentralisationFlow);

    void addItemTotalToDiscountSummary(UserCartV2Model userCartV2Model);
    void sortDealDiscountDetails(UserCartV2Model userCartV2Model);

    void updateGoldKdDealDiscountDetails(List<CartItemV2Model> cartItems);

    void populateOrderDiscountingHistory(UserCart userCart, List<DealLevelPromotion> dealLevelPromotions);

    GetAvailableOffersResponse getAvailableOffersForUser(GetAvailableOffersRequest request, String lang);

    List<OrderDiscountingHistory> getAllOrderDiscount(List<Long> orderIds);

    public List<OrderDiscountingHistory> getAllOrderDiscount(Long orderId);
    }


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/KafkaConsumer.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.constants.KafkaConstants;
import com.dealshare.service.cartservice.models.kafka.KafkaCancellationRequestModel;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.kafka.annotation.KafkaListener;
import org.springframework.stereotype.Service;

@Service
@Slf4j
public class KafkaConsumer {

  @Autowired
  MyOrderService myOrderService;

//  @KafkaListener(topics = KafkaConstants.TOPIC, groupId = KafkaConstants.GROUP_ID)
//  public void consumerOrderCancellationSyncEvent(KafkaCancellationRequestModel payLoad){
//    myOrderService.orderCancellation(payLoad);
//  }

}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/UserOrderService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.OrderDetailsSummaryDto;
import com.dealshare.service.cartservice.entities.Order;
import com.dealshare.service.cartservice.entities.ProductOffer;
import com.dealshare.service.cartservice.entities.User;
import com.dealshare.service.cartservice.models.*;
import com.dealshare.service.cartservice.models.minimart.InventoryUpdateRequestModel;
import com.dealshare.service.cartservice.models.minimart.OrderDealMappingModel;
import com.dealshare.service.cartservice.models.minimart.UserOrderSyncModel;
import org.springframework.http.ResponseEntity;
import org.springframework.web.multipart.MultipartFile;

import java.util.List;

public interface UserOrderService {

    ResponseEntity<?> initiateReturn(ReturnWrapperRequestModel request, String userName, String userRole);

    ResponseEntity<?> deleteReturn(Long returnId);



    UserOrderModel getUserOrder(Order order, String lang, OfferResponseModel offerResponseModel);

    List<OrderTrackingModel> getOrderTracking(Long orderId, String authkey);

    AddressModel getGetOrderAddress(Order order);

    void updateInventoryTestEventOfflineSales(List<InventoryUpdateRequestModel> inventoryUpdateRequestModel);

    OrderInfoModel computeOrderInfo(String orderId, String lang);

    void isAvailableForBuy(User user, ProductOffer productOffer, Boolean newUser);

    List<OrderDealMappingModel> syncOrders(UserCacheModel userCacheModel, UserOrderSyncModel userOrderSyncModel, Long userAddressId);

    ResponseEntity<?>  cancelOrderThroughPanel(Long orderId);

    byte[] discardOrders(MultipartFile file) throws Exception;

    byte[] bulkUpdateCancelOrders(MultipartFile file,List<String> roles) throws Exception;

    void discardFlaggedOrders(Long userId, Long cartId);

    OrderDetailsSummaryDto getOrderDetailsSummary(Long orderId);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/PricingSnapshotService.java

package com.dealshare.service.cartservice.services;


import com.dealshare.service.cartservice.entities.CartSnapShotEntity;
import com.dealshare.service.cartservice.models.CartModel;
import com.dealshare.service.cartservice.repositories.CartSnapshotRepository;
import com.fasterxml.jackson.core.JsonProcessingException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Service;

import java.util.Date;

@Service
public class PricingSnapshotService {

    @Autowired
    private CartSnapshotRepository cartSnapshotRepository;

    @Async
    public void dumpPricingSnapshot(CartModel cartModel, Date createdTime, Long ttl) throws JsonProcessingException {
        CartSnapShotEntity cartSnapShotModel = new CartSnapShotEntity(cartModel, createdTime, ttl);
        cartSnapshotRepository.save(cartSnapShotModel);
    }
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/RecommendationService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.models.CartAddOns.CartRecommendationRequestModel;
import com.dealshare.service.cartservice.models.CartAddOns.CartRecommendationResponseModel;

public interface RecommendationService {

    CartRecommendationResponseModel fetchRecommendedDealsDetails(CartRecommendationRequestModel cartRecommendationRequestModel);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartItemService.java

package com.dealshare.service.cartservice.services;

import com.dealshare.common.dtos.common.LocationInfo;
import com.dealshare.common.dtos.common.ResponseDealData;
import com.dealshare.common.dtos.common.UserInfo;
import com.dealshare.service.cartservice.entities.CartDetails;
import com.dealshare.service.cartservice.models.*;
import com.fasterxml.jackson.databind.JsonNode;

import java.util.List;
import java.util.Map;
import java.util.TreeMap;

public interface CartItemService {

    Map<String, OfferResponseModel> getOfferMapByOfferIds(List<String> offerIds);

    CartItem getCartItemDetailsV2(
            CartDetails cartDetailsModel,
            Long pincode,
            String source,
            Long userID,
            OfferResponseModel offerResponseModel,
            TreeMap<String, Object> priceMap,
            JsonNode priceData) throws Exception;

    void deleteExistingItems(Long cartId);

    Map<Long, OfferResponseModel> getOffersByOfferIds(List<Long> offerIds);

    List<CartItemV2Model> getCartItemDetailsV3(Map<Long, ResponseDealData> responseDealDataMap,
                                               List<CartDetailsV2Model> cartDetailsV2Models,
                                               String source,
                                               Long cartId, Long userId);

    void setCartItemsIsExpired(List<CartItemV2Model> cartItems,
                               Map<String, DealInventoryStatusModel> inventoryMap);

    Map<String, ResponseDealData> getResponseDealData(UserInfo userInfo,
                                                      LocationInfo locationInfo,
                                                      List<Long> offerPkIds,
                                                      List<String> offerIds, String lang);
}


=== IMPORT com.dealshare.service.cartservice.services.* (FULL FILE) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/services/CartServiceV4.java

package com.dealshare.service.cartservice.services;

import com.dealshare.service.cartservice.dtos.CartParamsTransferModelDTO;
import com.dealshare.service.cartservice.models.*;
import org.apache.commons.lang3.tuple.Pair;

/**
 * @author shubham.mandliya
 */

public interface CartServiceV4 {
    UserCartMinViewResponseModel cartMinView(Long userId,
                                             String source,
                                             Long pincode,
                                             String appVersion,
                                             String platform);

    UserCartResponseModel getCart(Long userId,
                                  String source,
                                  Long pincode,
                                  String lang,
                                  String appVersion,
                                  Boolean applyRefund,
                                  Boolean applyWalletCashback,
                                  Integer palId, String platform, Boolean juspayEnabled, CartParamsTransferModelDTO cartParamsTransferModelDTO);

    HomePageStrip getHomePageStrip(HomePageStripRequest homePageStripRequest, String lang, Long userId,
                                   Long pincode, Long palId);

    AvailablePromotions getAvailableOffers(String lang, Long userId);

    Pair<CartUpdateResponseModel, UserCartV2Model> getUserCartV2ModelWithResponse(CartUpdateRequestModel cartUpdateRequestModel, String appVersion, Integer palId, String platform, String deviceId, String appsFlyerId, String advertisingId, UserCacheModel userCacheModel, LocationV3Model locationV3Model,CartParamsTransferModelDTO cartParamsTransferModelDTO);

    CartUpdateResponseModel HandleFreeDealLogic(UserCartV2Model UserCartV2Model,LocationV3Model locationV3Model,String source, CartUpdateRequestModel cartUpdateRequestModel, UserCacheModel userCacheModel, CartParamsTransferModelDTO cartParamsTransferModelDTO, String appVersion, Integer palId);

    UserCartV2Model HandleUpdateCartFreeDealLogic(UserCartV2Model userCartV2Model,LocationV3Model locationV3Model,String source, CartUpdateRequestModel cartUpdateRequestModel, UserCacheModel userCacheModel, CartParamsTransferModelDTO cartParamsTransferModelDTO, String appVersion, Integer palId);

    void validateUpdateCartAndRevertCartCache(CartUpdateRequestModel cartUpdateRequestModel, UserCacheModel userCacheModel, CartUpdateResponseModel cartUpdateResponseModel, UserCartV2Model userCartV2Model, String appVersion, String platform);

}

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.Qualifier ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.get ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.error ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getMessage ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfig ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.toString ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getId ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.stream ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.map ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfig ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.collect ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.toList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.get ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getId ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.error ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getMessage ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.stream ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.map ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.format ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.collect ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.toList ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getCartConfigFromRedis (METHOD) ===
# File: /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java



    public CartConfig getCartConfigFromRedis(String cacheKey){
        CartConfig cartConfig = null;
        Object cacheObject = cacheService.get(cacheKey);
        CartConfigCacheModel cartConfigCacheModel;
        try {
            cartConfigCacheModel = (CartConfigCacheModel) cacheObject;
        } catch (Exception e){
            log.error("Parsing error of cart Config for cacheKey : {} with exception : {}", cacheKey, e.getMessage());
            cartConfigCacheModel = objectMapper.convertValue(cacheObject, CartConfigCacheModel.class);
        }
        if(!ObjectUtils.isEmpty(cartConfigCacheModel)){
            cartConfig = cartConfigCacheMapper.mapCacheModelToEntity(cartConfigCacheModel);
        }
        return cartConfig;
    }

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.isEmpty ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getValue ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.format ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.ValidationException ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.dealshare.service.cartservice.utils.CartConfigUtils.getValue ===
⚠️ Method not found in /Users/dealshare/Downloads/cart-service/src/main/java/com/dealshare/service/cartservice/utils/CartConfigUtils.java

=== IMPORT com.fasterxml.jackson.core.type.TypeReference ===
⚠️ Not found in repo.

=== IMPORT com.fasterxml.jackson.databind.ObjectMapper ===
⚠️ Not found in repo.

=== IMPORT lombok.extern.slf4j.Slf4j ===
⚠️ Not found in repo.

=== IMPORT org.springframework.beans.factory.annotation.Autowired ===
⚠️ Not found in repo.

=== IMPORT org.springframework.beans.factory.annotation.Qualifier ===
⚠️ Not found in repo.

=== IMPORT org.springframework.beans.factory.annotation.Value ===
⚠️ Not found in repo.

=== IMPORT org.springframework.stereotype.Service ===
⚠️ Not found in repo.

=== IMPORT org.springframework.util.CollectionUtils ===
⚠️ Not found in repo.

=== IMPORT org.springframework.util.ObjectUtils ===
⚠️ Not found in repo.

=== IMPORT java.io.IOException ===
⚠️ Not found in repo.

=== IMPORT java.math.BigDecimal ===
⚠️ Not found in repo.

=== IMPORT java.util.* ===
⚠️ Not found in repo.

=== IMPORT java.util.stream.Collectors ===
⚠️ Not found in repo.

